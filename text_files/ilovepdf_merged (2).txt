Digital Electronic Circuits © Dr. Samer Arandi - An-Najah National University Dr. Samer Arandi Course Outline © Dr. Samer Arandi - An-Najah National University Bipolar Families : RTL , DTL , TTL , ECL and I2L NMOS Transistor Analysis CMOS Inverters and gates CMOS Fabrication OP-AMPs Sensors and Transducers ( optical and ultrasonic ) Driver Circuits ( motors , relays , Triacs , Diacs ) Digital to Analogue and Analogue to Digital Regulated Power Supplies Introduction © Dr. Samer Arandi - An-Najah National University Integrated Circuits ( IC ) : arbitrary number of interconnected gates in a silicon semiconductor crystal ( chip ) Contains electronic components for constructing digital gates Mounted in a ceramic or plastic container that exposes a number of pins ( tens to thousands ) Complexity is measured by the number of logic gates in a single chip Levels of Integration © Dr. Samer Arandi - An-Najah National University Small scale Integration ( SSI ) : typically fewer than 10 independent gates – early 60s Medium Scale Integration ( MSI ) : 10 to 1000 of gates ( decoders , adders , multiplexers ) – late 60s Large Scale Integration ( LSI ) : thousands of gates ( 1st and 2nd generation processors , memory chips , PLD ) – mid 70s Very Large Scale Integration ( VLSI/ULSI ) : hundreds of thousands of gates to several billions ( complex microcomputers chips ) – 80s till present System-on-a-Chip ( SoC ) : all components needed by a computer is included on a single chip . – Lower manufacturing cost and reduced power budget . Why ? 3 Dimensional Integrated Circuits ( 3D-ICs ) : two or more layers of components integrated both vertically and horizontally . Reduced power budget and overall wire length Digital Logic Families © Dr. Samer Arandi - An-Najah National University The basic circuit in each technology/family is a NAND , NOR or INVERTER . Many families have been introduced : Bipolar Transistors ( flow of two carriers ) RTL : Resistor-Transistor Logic DTL : Diode-Transistor Logic TTL : Transistor-Transistor Logic ECL : Emitter-Coupled Logic I2L : Integrated Injection Logic Unipolar Transistors ( Field Effect Transistors ) MOS : Metal-Oxide Semiconductor – high density CMOS : Complementary MOS – lower power consumption , dominant family , used in VLSI Logic Family Characterization © Dr. Samer Arandi - An-Najah National University Fan-Out Power Dissipation Propagation Delay Noise Margin The Standard TTL series Characteristics 1964 TI introduced first line of standard TTL IC ’ s . 54/74 series one of the most widely used series known as the 74 series ( 54 wider temperature range ) Many semiconductor IC manufactures produce TTL IC ’ s Fortunately all use the same numbering system allowing interchanging of components © Dr. Samer Arandi - An-Najah National University SN74 DM74 S74 Texas Instruments 74 Series National Semiconductor 74 Series Signetics 74 Series The Standard TTL series Characteristics Several other TTL series have been developed since the introduction of the 74 standard series . 74LS , 74S etc . Provide a wide choice of speed and power characteristics Speed Power ( picoJoules ) : the lower the better Differences in TTL family are not in Logic Levels , but in internal construction of the basic NAND gate . © Dr. Samer Arandi - An-Najah National University The Standard TTL series Characteristics The propagation delay of a transistor which goes into saturation depends on two factors : Saturation delay ( storage time delay ) RC time constant By reducing resistor values reduces RC time constant decreases propagation delay Trade-off is high power dissipation lower resistance draws more current from power supply © Dr. Samer Arandi - An-Najah National University Low Power , 74L series © Dr. Samer Arandi - An-Najah National University Similar to a standard TTL But all resistor values have been increased . good for applications with low frequency , battery operated circuits – calculators etc . High Speed , 74H series © Dr. Samer Arandi - An-Najah National University Similar to a standard TTL But all resistor values have been reduced .  faster switching  propagation delay 6 nseconds but  increased power dissipation 22 mW How to increase speed ? © Dr. Samer Arandi - An-Najah National University Whatever is done to the value of the resistors Speed is ultimately limited by the time required to pull the output transistors out of saturation . 74 , 74L and 74H series all operate with saturated switching many of the transistors , when conducting will be in a saturated condition As has been seen this causes a saturation delay ( storage delay ) , when switching from ON to OFF limits the circuit ’ s switching speed . Schottky TTL , 74S series © Dr. Samer Arandi - An-Najah National University Can this be improved ? In Schottky TTL ( STTL ) Transistors kept out of saturation by using Schottky barrier diodes ( SD ) Formed by a junction of a metal and semiconductor conventional diode with a junction of p-type and n-type semiconductor material SD connected between the base and the collector Do not allow the transistors to go as deeply into saturation SD has a forward voltage drop of 0.4V = Schottky TTL , 74S series © Dr. Samer Arandi - An-Najah National University When the Collector-Base junction becomes forward biased at the on-set of saturation  SD will conduct , diverting some input current away from base .  this has effect of reducing the excess base current .  decreases saturation ( storage time ) delay at turn-off 74S00 NAND has average propagation delay of 3 nsecs twice as fast as the 74H00 makes the 74H series redundant nowadays Schottky TTL , 74S series © Dr. Samer Arandi - An-Najah National University Circuit also uses smaller resistor values to improve switching times Improves the circuit average power dissipation to 20 mW NOTE All transistor are Schottky Transistors . Q4 is not required to be a Schottky , why ? Schottky TTL , 74S series Output A B C Q 1 370 Q 2 Q3 Q5 Q4 Q6 350 3.5k +5 V 55 2.8k 760 © Dr. Samer Arandi - An-Najah National University Low Power Schottky TTL , 74LS series © Dr. Samer Arandi - An-Najah National University 74 LS is a low powered version of the 74S series uses with larger resistor values than 74S Low circuit power requirements but at the expense of increase in switching times . Power Dissipation Propagation Delay 2 mW 9.5 nseconds This is the mainstay of the TTL family Found in nearly all new designs that do not require max speed . Advanced Schottky TTL , 74AS series © Dr. Samer Arandi - An-Najah National University As a result of the recent development in IC design and manufacturing process – High speed Schottky diodes Power Dissipation Propagation Delay 10 mW 1.5 nseconds Advanced Low-Power Schottky TTL , 74ALS series © Dr. Samer Arandi - An-Najah National University Improvement in both power and speed . Power Dissipation Propagation Delay 1 mW 4 nseconds This series has the lowest speed-power product of the TTL series very close to the lowest gate power dissipation This will eventually replace 74LS as the most widely used TTL series . Emitter Coupled Logic © Dr. Samer Arandi - An-Najah National University Non-saturated digital logic family Since transistors do not saturate , it is possible to achieve a prop . delay of 1-2 ns ( fastest family ) Utilized in systems that require very high speed Power dissipation and noise immunity is the worst ! Power dissipation 25 mw © Dr. Samer Arandi - An-Najah National University Emitter Coupled Logic ( ECL ) Emitter Coupled Logic ( ECL ) © Dr. Samer Arandi - An-Najah National University A B VEE=-5.2 V 220 Ω 245 Ω 50 KΩ 50 KΩ GND GND OR 779 Ω Q1 Q2 Q5 Q7 NOR Q8 -0.8 V High -1.8 V Low VBB=-1.3V VBB : bias voltage , mid-point of the logic swing Emitter Follower Output Differential Input amplifier © Dr. Samer Arandi - An-Najah National University Use of VCC as ground and VEE at -5.2 V results in best noise immunity ECL - Simplified 220 Ω A B VEE=-5.2 V © Dr. Samer Arandi - An-Najah National University 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND GND OR 779 Ω Q1 Q2 Q5 Q7 NOR Q8 -0.8 V High -1.8 V Low ECL - Simplified 220 Ω A = High ( -0.8 ) B VEE=-5.2 V © Dr. Samer Arandi - An-Najah National University 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND GND OR 779 Ω Q1 Q2 Q5 Q7 NOR Q8 -0.8 V High -1.8 V Low ECL - Simplified 220 Ω 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND GND OR NOR Q1 Q2 Q5 Q7 Q8 -1.6 V 779 Ω -0.8 V High -1.8 V Low A = High ( -0.8 ) B VEE=-5.2 V © Dr. Samer Arandi - An-Najah National University ECL - Simplified ON 220 Ω 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND GND OR 779 Ω Q1 Q2 Q5 Q7 NOR Q8 -1.6 V Difference between VBB & VE is 0.3 V only Q5 is cut-off A = High ( -0.8 ) B VEE=-5.2 V © Dr. Samer Arandi - An-Najah National University -0.8 V High -1.8 V Low ECL - Simplified 220 Ω 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND GND OR 779 Ω Q1 Q2 Q5 Q7 NOR Q8 -1.6 V Difference between VBB & VE is 0.3 V only Q5 is cut-off A = High ( -0.8 ) B VEE=-5.2 V © Dr. Samer Arandi - An-Najah National University -0.8 V -0.8 V High -1.8 V Low ECL - Simplified 220 Ω 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND GND OR 779 Ω Q1 Q2 Q5 Q8 -1.6 V Difference between VBB & VE is 0.3 V only Q5 is cut-off A = High ( -0.8 ) B VEE=-5.2 V © Dr. Samer Arandi - An-Najah National University -0.8 V 1.0 V Q7 NOR -1.8 V -0.8 V High -1.8 V Low ECL - Simplified ( -1.6 - -5.2 ) * 220/779 A © Dr. Samer Arandi - An-Najah National University B VEE=-5.2 V 220 Ω 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND GND OR 779 Ω Q1 Q2 Q5 Q7 NOR Q8 -0.8 V High -1.8 V Low ECL - Simplified 220 Ω A B VEE=-5.2 V = Low ( -1.8 ) = Low ( -1.8 ) © Dr. Samer Arandi - An-Najah National University 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND GND OR 779 Ω Q1 Q2 Q5 Q7 NOR Q8 -0.8 V High -1.8 V Low ECL - Simplified 220 Ω 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND GND OR NOR Q1 Q2 Q5 Q7 Q8 -2.1 V 779 Ω cut-off A B VEE=-5.2 V = Low ( -1.8 ) = Low ( -1.8 ) © Dr. Samer Arandi - An-Najah National University cut-off -0.8 V High -1.8 V Low ECL - Simplified 220 Ω 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND OR NOR Q1 Q2 Q5 Q7 Q8 -2.1 V 779 Ω cut-off A B VEE=-5.2 V = Low ( -1.8 ) = Low ( -1.8 ) © Dr. Samer Arandi - An-Najah National University cut-off 1.0 V -1.8 V -0.8 V High -1.8 V Low GND ( -2.1 - -5.2 ) * 245 / 779 ECL - Simplified 220 Ω 245 Ω 50 KΩ 50 KΩ VBB=-1.3V GND GND OR NOR -0.8 V Q2 Q5 Q7 Q8 -2.1 V 779 Ω cut-off A B VEE=-5.2 V = Low ( -1.8 ) = Low ( -1.8 ) © Dr. Samer Arandi - An-Najah National University cut-off Q1 1.0 V -1.8 V -0.8 V High -1.8 V Low ECL - Simplified Integrated Injection Logic © Dr. Samer Arandi - An-Najah National University Integrated Injection Logic ( I2L ) © Dr. Samer Arandi - An-Najah National University Saturated bipolar logic family Utilized in MSI and LSI Small size Low power consumption Cheaper fabrication cost Merges transistor components - Merged Transistor Logic ( MTL ) One semi-conductor region is part of two or more devices . This allows considerable saving in silicon chip area . Integrated Injection Logic ( I2L ) © Dr. Samer Arandi - An-Najah National University A single inverter is implemented as : Multi-collector npn transistor Multi-collector pnp transistor that is driving the npn transistor . The emitter of the driving transistor is called the injector Integrated Injection Logic ( I2L ) © Dr. Samer Arandi - An-Najah National University The injector distributes current to multiple units which form its multi-collectors . Open-collector output which allows a wired-and configuration ( typically followed by an inverter ) Integrated Injection Logic ( I2L ) The collector of the current injector transistor and the base of each multiple collector transistor are merged , i.e . one p region is used for both The base of the injector transistor is merged with the emitter of the multiple collector transistor . © Dr. Samer Arandi - An-Najah National University Metal Oxide Semiconductor © Dr. Samer Arandi - An-Najah National University Metal Oxide Semiconductor © Dr. Samer Arandi - An-Najah National University Field Effect Transistor ( FET ) : unipolar transistor as its operation depends on the flow of one type of carriers Two types of FETs : Junction Field Effect Transistor ( JFET ) – used mainly in linear circuits Metal-Oxide Semi-conductor FET ( MOSFET ) – used in digital circuits Advantage : fabricated in less area than Bipolar Transistors MOS Transistors p-channel n-type substrate ( lightly doped ) Two heavily doped regions with p-type impurities ( source and drain ) The region between the source and drain is called the channel The gate is the metal plate separated from the substrate by an insulated dielectric of silicon dioxide A negative voltage at the gate = > induced electric field at the channel = > attracts p-type carriers ( holes ) = > conductivity increases = > current flows from source to drain © Dr. Samer Arandi - An-Najah National University MOS Transistors © Dr. Samer Arandi - An-Najah National University Two modes of operation ( depends on the state of the channel at zero voltage ) : – Depletion channel is initially doped with p-type impurities , i.e . a conducting channel exists at 0 V Enhancement region beneath the gate is initially uncharged a voltage must be applied to the gate to induced a channel i.e . current is enhanced by gate voltage MOS Transistors © Dr. Samer Arandi - An-Najah National University The majority carriers enter the device from the source terminal to the drain when the voltage applied to the gate exceeds a threshold VT p-channel The source is connected to the substrate and a negative voltage is applied to the drain When the gate voltage is sufficiently negative below VT p-type carriers flow from S to D ( positive current flow ) n-channel The source is connected to the substrate and a positive voltage is applied to the drain When the gate voltage is sufficiently positive above VT n-type carriers flow from S to D ( equivalent to positive current flow from D to S ) MOS Transistors Symbols for MOS Transistors © Dr. Samer Arandi - An-Najah National University Enhancement Mode © Dr. Samer Arandi - An-Najah National University MOS – Logic Gates RQ1 : Load Resistor RQ2 < < RQ1 MOSFET can be used as resistor as well as a transistor Resistance value can be determined as the ratio between VDS and IDS Different resistor values may be constructed during manufacturing by fixing the channel length and width of the MOS device © Dr. Samer Arandi - An-Najah National University MOS – Logic Gates RQ2+RQ3 < < RQ1 Q1 Q2 Q3 © Dr. Samer Arandi - An-Najah National U niversity Complementary MOS s d d s Takes advantage of the ability to fabricate both n-type and p-type on the same substrate Basic circuit is the inverter : – The n-MOS conducts when gate-to-source is pos+ The p-MOS conducts when gate-to-source is neg- Both are turned off when gate-to-source is zero CMOS – Logic Gates © Dr. Samer Arandi - An-Najah National University CMOS – Models/Symbols © Dr. Samer Arandi - An-Najah National University MOS Operation and Analysis © Dr. Samer Arandi - An-Najah National University L : channel length ( 350nm – 90nm ~ 2004 ) W : channel width tox : gate oxide thickness ( < 25 Å ~2004 ) bulk ( substrate ) : doping density xj : junction depth ( 150 – 70 nm ~2004 ) © Dr. Samer Arandi - An-Najah National University Determine the electrical Characteristics of the transistor MOS Threshold Voltage © Dr. Samer Arandi - An-Najah National University Threshold Voltage ( VT ) : the minimum gate voltage needed to initiate the forming of a conducting channel VT mainly depends on the material properties - largely determined at the time of fabrication The most important factors affecting VT include : The gate conductor material ( poly vs. metal ) The gate insulation material ( SiO2 ) Impurities in the oxide The thickness of the gate material The channel doping concentration VT is also depends on : Temperature : changes by -2mV/degree C for low substrate doping levels Source-Bulk voltage VSB As VGS moves from 0 to a positive value : positive charge accumulates on the gate negative charge ( electrons ) accumulates in the substrate under the gate The mobile holes are pushed down creating a depletion layer ( contains the immobile negative charge ) As the voltage increases the depletion layer thickness increases and a layer of mobile electrons appear ( weak inversion condition ) Further increase in the voltage increases the concentration of the electrons until its equal to the concentration of the holes ( strong inversion condition ) © Dr. Samer Arandi - An-Najah National University For gate voltage above this point : The depletion layer thickness remains approximately constant Additional mobile carriers accumulate in the channel ( drawn from S & D ) Application of VDS > 0 causes current to flow in the channel The value of the VGS required to produce strong inversion is called the threshold voltage © Dr. Samer Arandi - An-Najah National University Threshold Voltage Components © Dr. Samer Arandi - An-Najah National University VT has three main components : ΦGC : difference in work function between the gate material ( G ) and the silicon substrate on the channel side ( C ) undesirable positive charge Qox due to imperfections in the semi-oxide interface doping voltage required to change the surface potential to the strong inversion condition and to offset the induced depletion layer charge QB VT = ΦGC – Qox/Cox – 2ΦF – QB/Cox At VSB = 0 , VT and QB are denoted as VT0 and QB0 VT0 = ΦGC – Qox/Cox – 2ΦF – QB0/Cox VFB ni K : intrinsic ( non-doped carrier concentration ) depends on temperature ( 1.45x1010 cm-3 ) NA : carriers density in doped semi-conductor for p-type material ( ND for n-type ) : Boltzman constant , T : temperature , q : electron charge F Φ = k * t ln ni q NA Thermal voltage = 26mV © Dr. Samer Arandi - An-Najah National University VFB : flat band voltage ΦF : equilibrium electrostatic potential ( the shift in Fermi level due to doping ) |2ΦF| : band bending voltage tox ox ox C = QB0 =  2q * Si * NA * | 2F| Q B0 = q * NA * Xd VSB q : electronic charge ( 1.6x10-19 ) Xd : depletion layer width εSi : permittivity of silicon ( 1.06x10-12 ) for p-type material ( ND for n-type ) : Source-Bulk voltage ( typically zero ) Cox εox tox : gate-oxide capacitance : permittivity of oxide : oxide thickness q * NA © Dr. Samer Arandi - An-Najah National University 2 * Si * | 2F | Xd = Signs © Dr. Samer Arandi - An-Najah National University VFB is negative in nMOS , positive in pMOS ΦF is negative in nMOS , positive in pMOS QB0 and QB are negative in nNMOS , positive in pMOS VSB is positive in nMOS , negative in pMOS Current-Voltage Characteristics MOS has three modes of operation : VGS < VT ( IDS is zero ) Cut-off Linear Saturation The mode depends on the terminal voltages : VGS VDS VGS > V © Dr. Samer Arandi - An-Najah National University T , VDS > 0 ( IDS is non-zero ) Linear Mode At VDS = 0 , the inverted channel is in equilibrium and IDS = 0 If a small VDS > 0 is applied , IDS will flow from S to D , such that IDS is proportional to VDS The transistor ( the channel ) acts as a voltage controlled resistor © Dr. Samer Arandi - An-Najah National University © Dr. Samer Arandi - An-Najah National University Linear Mode [ 2 ( V GS VT ) VDS VDS ] 2 IDS  K 2 IDS depends on both VGS and VDS L K  K ' W K '  n * Cox  nox tox µn : carrier mobility Saturation Mode © Dr. Samer Arandi - An-Najah National University As the drain voltage is increased the inversion layer charge and the channel depth at the drain decreases At VDS = VGS-VT0 ( called VDSAT ) the channel inversion charge at the drain becomes zero ( pinch-off point ) As VDS > VDSAT the inversion layer near the drain vanishes - > channel length decreases Saturation Mode Pinch-off point 2 IDS  K ( VGS VT ) 2 IDS  K ( VGS VT ) 2 ( 1  * VDS ) © Dr. Samer Arandi - An-Najah National University 2 ( account for channel modulation ) λ : channel length modulation coefficient Saturation Mode © Dr. Samer Arandi - An-Najah National University Practical Considerations © Dr. Samer Arandi - An-Najah National University The I-V characteristics discussed so far neglect many effects that are important in modern fabrication processes : Velocity Saturation We assumed that carrier drift velocity and hence current increase linearly with the electric field between source and drain . This is only true for weak electric fields , at high electric fields and short channel lengths carrier drift velocity saturates ( saturation occurs when carriers reach saturation velocity ) Thus , saturation current is linearly dependent on voltage rather than quadratically dependent Practical Considerations ( cont . ) © Dr. Samer Arandi - An-Najah National University Mobility Degradation Strong vertical electric fields resulting from large Vgs reduce carrier mobility μ. Sub-threshold conduction We assumed that no current flows from source to drain when Vgs < Vt . In reality this is not true and current drops off exponentially . This current is termed as leakage current Tunneling According to quantum mechanics , there is a finite probability that carriers will tunnel through the gate oxide . This results in gate leakage current flowing into the gate . Probability of tunneling drops off exponentially with oxide thickness , and so was negligible until recently . Practical Considerations ( cont . ) © Dr. Samer Arandi - An-Najah National University Junction leakage The p-n junctions between S & D and the substrate form diodes . The well to substrate junction is another diode . Although these diodes are reverse biased they still conduct a small amount of current Temperature Carrier mobility decreases with temperature The magnitude of the threshold voltage decreases nearly linearly with temperature Junction leakage increases with temperature because Is is strongly temperature dependent . Net effect : ON current decreases , OFF current increases , worse performance at high temperature Practical Considerations ( cont . ) © Dr. Samer Arandi - An-Najah National University Geometry Dependence Layout designers draw transistors with some width and length , Wdrawn and Ldrawn . The actual dimensions may differ , due to Polysilicon over-stretching Effective dimensions should be used rather than drawn dimensions for analysis or values can be significantly off . Below 0.25μm , transistor orientation and amount of nearby poly affect the effective length MOS Capacitance © Dr. Samer Arandi - An-Najah National University The switching speed of MOS circuits is limited by the time required to charge/discharge the capacitances at the internal nodes The capacitances must be calculated from device dimensions and dielectric constants The values are usually specified in femto- Farads per µmeter of width ( fF/µm ) – CG vs. Cg Types of MOS Capacitance Thin-oxide Capacitance – Cg = > ( Cgs , Cgd , Cgb ) Junction capacitance - Csb and Cdb Overlap Capacitance – Col Depletion layer capacitance - under the channel - Cjc ( associated with Cgb ) Non-linear voltage-dependant linear voltage-independant © Dr. Samer Arandi - An-Najah National University © Dr. Samer Arandi - An-Najah National University Thin-Oxide Capacitance The most important capacitance in MOS The two plates of the capacitor are the gate and the channel The dielectric is the oxide between the two plates CG  W * Cg Cg  Cox * L  ox * L tox © Dr. Samer Arandi - An-Najah National University Thin-Oxide Capacitance Calculations © Dr. Samer Arandi - An-Najah National University In 5 µm technology ( L=5 µm ) , tox = 1100 Å Cg = Cox * L = ( ( 4 * 8.85x10-14 ) /110 ) * 5 µm = 1.6 fF/µm In 0.35 µm technology ( L=0.35 µm ) , tox = 75 Å Cg = Cox * L = ( ( 4 * 8.85x10-14 ) /75 ) * 0.35 µm = 1.6 fF/µm In 0.13 µm technology ( L=0.1 µm ) , tox = 22 Å Cg = Cox * L = ( ( 4 * 8.85x10-14 ) /22 ) * 0.1 µm = 1.6 fF/µm The factor remained constant for over 25 years – Both L and tox are scaled at the same rate and so their effects cancel each other Thin-Oxide Capacitance © Dr. Samer Arandi - An-Najah National University The gate capacitance is decomposed into three capacitances : Cgs : gate-to-source capacitance Cgd : gate-to-drain capacitance Cgb : gate-to-bulk capacitance The composition vary depending on whether the device is in cut-off , linear or saturation states Thin-Oxide Capacitance © Dr. Samer Arandi - An-Najah National University * assuming a VGS = 0 ( in the cut-off region Cgb is in series with the depletion capacitance Cjc ) Junction Capacitance © Dr. Samer Arandi - An-Najah National University The S and D regions and the substrate forms pn junctions that give rise to two additional capacitances - Csb and Cdb In addition , a junction capacitance is formed between the inverted channel and the substrate – Cjc This capacitance depends on the terminal voltage Junction Capacitance B  k * T ln NA * ND q ni 2 si * q * NA 2 * B ( 2 * B ) ( si * q ) * NA * ND  NA  ND Cj0  Cj0 * A © Dr. Samer Arandi - An-Najah National University ( 1 CJ  CJ : junction capacitance Cj0 : zero-bias junction capacitance ( fF/cm2 ) A : area of the junction = W * ( xj+Y ) m : the junction grading coefficient ( approx . 1/2 for abrupt junctions ) ΦB : built-in junction potential VJ ) m B Junction Capacitance Since the terminal voltages change during dynamic operation we need to calculate the capacitance under such transient conditions We approximate this capacitance by finding the large-signal average junction capacitance * : CJ  Keq * Cj0 * A * ( B V 2  B V1 ) © Dr. Samer Arandi - An-Najah National University V 2 V1 Keq   2 * B Keq : dimensionless coefficient * calculated for a transition between two known voltages , V1 and V2 © Dr. Samer Arandi - An-Najah National Unive rsity Overlap Capacitance Voltage-independent capacitance that exists on both sides of the gate Composed of two components : diffusion capacitance between the gate and the diffusion extensions of the source and drain - Cov fringing capacitance between sidewall of the poly-silicon and surface of drain and source - Cf Col = Cov + Cf Overlap Capacitance Cf  2ox ln ( 1 Tpoly ) © Dr. Samer Arandi - An-Najah National University tox  Cov  Cox * LD Col  Cov  Cf MOS Inverter Static Characteristics © Dr. Samer Arandi - An-Najah National University Voltage Transfer Characteristics © Dr. Samer Arandi - An-Najah National University DC Voltage Transfer Characteristics in Vout Gain = V In an ideal implementation of an inverter , the two binary levels are ground and VDD . The output transition between the 1 and 0 states occurs when the input is exactly VDD/2 . © Dr. Samer Arandi - An-Najah National University Voltage Transfer Characteristics Range : voltage interval over which a signal is considered to be logic 0 or logic 1 . For an ideal inverter : -The input range is very large -The output range is small This is desirable as it implies : the input can vary significantly with little or no effect on the output ( the gate rejects noise at the input ) Practical VTC © Dr. Samer Arandi - An-Najah National University VOL may not reach GND VOH may not reach VDD Vout doesn ’ t switch from VDD to GND at VDD/2 Vs : point where Vout = Vin instead of 3 regions ( 0 gain , infinite gain , 0 gain ) we have ( low gain , high gain , low gain ) h National University Practical VTC © Dr. Samer Arandi - An-Naja The input ranges that define 0 and 1 are smaller than the ideal case 0 to VIL VIH to VDD The two output ranges are larger than the ideal case VOL to VOUL VOUH to VOH © Dr. Samer Arandi - An-Najah National University Noise When the input range is larger than the output range , the gate retains the noise rejection property i.e . output fluctuation are small even with large input fluctuation This attenuates the noise when multiple gates are connected successively Noise Margin Definitions © Dr. Samer Arandi - An-Najah National University If the noise amplitude at the input of any logic circuit is smaller than the noise margin of the circuit the noise will be attenuated Noise may be transferred to logic nodes or interconnecting lines by : Unwanted capacitive or inductive coupling Series inductance and resistance in the shared ground and power supply lines The robustness of a gate depends on : How much noise can be applied before the gate fails ( gate properties ) How much noise actually couples into the gate ( environ . ) Noise Margins © Dr. Samer Arandi - An-Najah National University The noise margin specifies the range over which the circuit will function properly . Noise margin metrics : single-source noise margin ( SSNM ) : assumes a single noise source affecting one logic node ( not realistic ) multiple-source noise margin ( MSNM ) : assumes multiple noise sources potentially affecting all nodes ( more realistic ) Noise Margins ( cont . ) System with single-stage noise of magnitude Vn System with multi-stage noise © Dr. Samer Arandi - An-Najah National University Noiseless System Noise Margins ( cont . ) © Dr. Samer Arandi - An-Najah National University For a noiseless system : Vout = f ( Vin ) When adding noise Vn the output : Vout = f ( Vin+Vn ) Can be eventually simplified into : Vout = Noiseless_Output + noise * gain This implies that if the inverter is operating in the region where : The gain > 1 , noise is amplified ( undesired ) The gain < 1 , noise is attenuated ( desired ) Noise Margins ( cont . ) © Dr. Samer Arandi - An-Najah National University We can define the noise margins by using the VTC points where the gain is 1 to establish the transition points of the range Noise Margins ( cont . ) © Dr. Samer Arandi - An-Najah National University NMH = VOH - VIH NML = VIL - VOL Vin  Vout Inverter Noise Margins ( cont . ) © Dr. Samer Arandi - An-Najah National University NMH = VOH - VIH NML = VIL - VOL Buffer Resistive-Load NMOS Inverter Vin = VGS Vout = VDS VSB = 0 VT = VT0 © Dr. Samer Arandi - An-Najah National University Since IG is negligible IR = ID To calculate the noise margins we find the five critical points on the VTC : VOH , VOL , VIH , VIL and Vs © Dr. Samer Arandi - An-Najah National University VTC Calculating VOH © Dr. Samer Arandi - An-Najah National University To calculate VOH we set the input voltage below VT Therefore , no current flows And so : VOH = VDD Calculating VOL When a logic 1 is applied at the gate input ( represented by VOH of a previous gate ) the transistor is driven into the linear region . This implies : IR = IDS ( linear ) VDD VOL RL 2 © Dr. Samer Arandi - An-Najah National University  [ 2 ( V K T ) VOL VOL ] OH V 2 Calculating VOL To make VOL small : increase k ( i.e . W/L ) [ increase area , faster fall- time ] increase RL [ increase area , slower rise-time ] Decreasing VOL increases the power marginally , however increasing RL reduces power VDD 1 k * RL ( VDD VT ) VOL  RL © Dr. Samer Arandi - An-Najah National University P  I * V  ( VDD VOL ) * VDD Calculating VIL At Vin = VIL the output voltage is near VDD and the transistor is operating in the saturation region . This implies : IR = IDS ( saturation ) VDD VOut  k ( VIL VT ) 2 RL 2 © Dr. Samer Arandi - An-Najah National University Calculating VIL To increase VIL : Decrease k and RL . However , this increases VOL which is not desirable Both VIL and VOL shift in the same direction and so it 's difficult to affect the NML significantly 1 k * RL VIL  VT  © Dr. Samer Arandi - An-Najah National University Calculating VIH When Vin=VIH the output voltage is near 0 and the transistor is operating in the linear region IR = IDS ( linear ) Following a similar procedure we end-up with : k * RL © Dr. Samer Arandi - An-Najah National University 3 * k * RL 8 * VDD VIH  VT  1  Calculating VIH To decrease VIH we can increase kRL , however , this increases the rising delay and increases the power slightly Changes in k and RL have no effect on VOH so its possible to increase NMH 8 * VDD 1 3 * k * RL k * RL  VIH  VT  © Dr. Samer Arandi - An-Najah National University NMOS as Load Devices © Dr. Samer Arandi - An-Najah National University The resistor load ( RL ) requires large amount of chip area if realized in a standard MOS process The area would be more than 100 times that of a transistor ! It would also result in a large Rise Time Consequently resistors are rarely used as loads in MOS digital circuits Instead an NMOS transistor is used to perform the function of a pull-up resistor . Saturated Enhancement Load Inverter © Dr. Samer Arandi - An-Najah National University Pull-up transistor Pull-down transistor G of the pull-up is connected to VDD The transistor is working in the saturation mode or cut-off mode The relative sizes of the two transistors determine the output voltages ( must ensure VOL is < VT ) Saturated Enhancement Load Inverter © Dr. Samer Arandi - An-Najah National University Pull-up transistor Pull-down transistor Advantages : Single power supply Simple Fabrication Disadvantages : VOH is limited to VDD - VTL Linear Enhancement Load Inverter © Dr. Samer Arandi - An-Najah National University G of the pull-up is connected to VGG such that VGG > VDD + VTL The transistor is working in the linear mode for all the range of VOH VOH can reach to VDD Linear Enhancement Load Inverter © Dr. Samer Arandi - An-Najah National University Advantages : - VOH can reach to VDD Disadvantage : -The extra voltage source is associated with additional interconnections ( more chip area ) - DC power dissipation in the output low state Solution ? Depletion Load Inverter Better noise margins Single power supply Smaller overall layer More complicated fabrication process CMOS Inverter Steady-state power dissipation negligible ( only due to leakage currents ) VTC Transition is very sharp ( close to an ideal inverter ) © Dr. Samer Arandi - An-Najah National University CMOS Inverter © Dr. Samer Arandi - An-Najah National University Vin is at VDD : the NMOS device is conducting while the PMOS ( VGS=0 ) is cut-off and so VOUT is 0 and IDN is almost zero . Vin is at GND , the NMOS is cut-off while the PMOS is conducting and so Vout is equal to VDD and IDN is almost zero . VOH = VDD VOL = 0 large noise margins VTC 5 regions © Dr. Samer Arandi - An-Najah National University VTC © Dr. Samer Arandi - An-Najah National University VTC Symmetry A completely symmetrical VTC is obtained if VTP = - VTN and kP = kN Vs  VDD | VTP | VTN 1  WP © Dr. Samer Arandi - An-Najah National University WN nWN pWP   ECP * LP ECN * LN  © Dr. Samer Arandi - An-Najah National University CMOS Inverter Timing tpHL ( propagation delay high to low ) : time delay between V50 % transition of the rising input voltage and the V50 % transition of the falling output voltage . tpLH ( propagation delay low to low ) : time delay between V50 % transition of the falling input voltage and the V50 % transition of the rising output voltage . Propagation time delay ( tP ) tP  tPHL  tPLH 2 CMOS Inverter Timing occurs at = > t = 0.69 * Reff * CL We can model the inverter as an effective on- resistance ( Reff ) driving a load capacitance CL When the output is falling : Reff = RN Vout ( t )  VDD * e-t/RN * CL When the output is rising : Reff = RP Vout ( t )  VDD * ( 1 e-t/RP * CL ) In both cases the 50 % © Dr. Samer Arandi - An-Najah National University Effective On-Resistance Reff is inversely proportional to W/L The NMOS and PMOS have difference Reff . RN = Reqn * ( LN/WN ) RP = Reqp * ( LP/WP ) Reqn is defined in units of L/W © Dr. Samer Arandi - An-Najah National University Load Capacitance ( CL ) CL accounts for ( is the sum of ) : the internal capacitance of the inverter the capacitance of the wiring – the capacitance of the fan-out extrinsic © Dr. Samer Arandi - An-Najah National University intrinsic Internal Capacitance Comprised of the Capacitances connected to the output ( D ) : Cdb1 and Cdb2 are the junction capacitance ( D-to-B ) Since we mostly work in cut-off and saturation Cgd12 ( gate capacitance ) is almost negligible except from the overlap capacitance © Dr. Samer Arandi - An-Najah National University Fan-out Capacitance The Fan-out capacitance is due to the input of subsequent gates . This capacitance can be large : the sum of each of the driven gate capacitances Each gate capacitance comprises : gate capacitance ( thin-oxide capacitance ) overlap capacitances © Dr. Samer Arandi - An-Najah National University Minimizing Propagation Delay © Dr. Samer Arandi - An-Najah National University Reducing CL Careful layout can reduce this capacitance . Increase W/L ratio of the transistors . Warning : doing so increases the intrinsic capacitance Increase VDD ( Req depends on VDD ) The delay of a gate can be modulated by modifying the supply voltage . This allows the designer to trade off energy dissipation for performance . However , rising above a certain level yields only a minor improvement . Also , reliability concerns ( oxide breakdown , hot-electron effects ) set firm upper bounds . Req vs. VDD © Dr. Samer Arandi - An-Najah National University © Dr. Samer Arandi - An-Najah National University 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 5.5 5 4.5 4 3.5 3 2.5 2 1.5 1 V DD ( V ) p t ( normalized ) tp vs. VDD CMOS Fabrication © Dr. Samer Arandi - An-Najah National University CMOS Technology depends on using both N-Type and P- Type devices on the same chip . The two main technologies to do this task are : P-Well The substrate is N-Type . The N-Channel device is built into a P- Type well within the parent N-Type substrate . The P-channel device is built directly on the substrate . N-Well The substrate is P-Type . The N-channel device is built directly on the substrate , while the P-channel device is built into a N- type well within the parent P-Type substrate . © Dr. Samer Arandi - An-Najah National University CMOS Fabrication Two more advanced technologies to do this task are becoming more popular for sub-micron geometries where device performance and density must be pushed beyond the limits of the conventional p & n-well CMOS processes . Twin Tub Both an N-Well and a P-Well are manufactured on a lightly doped N-type substrate . Silicon-on-Insulator ( SOI ) CMOS Process SOI allows the creation of independent , completely isolated nMOS and pMOS transistors virtually side-by-side on an insulating substrate . © Dr. Samer Arandi - An-Najah National University CMOS Requires that both n-channel ( nMOS ) and p- channel ( pMOS ) transistors be built on the same chip substrate . To accommodate both nMOS and pMOS devices , special regions must be created in which the semiconductor type is opposite to the substrate type . These regions are called wells or tubs . A p-well is created in an n-type substrate or , alternatively , an n- well is created in a p-type substrate . In the simple n-well CMOS fabrication technology , the nMOS transistor is created in the p-type substrate , and the pMOS transistor is created in the n-well , which is built-in into the p-type substrate . © Dr. Samer Arandi - An-Najah National University N- & P-Well Method N-Well Fabrication Process © Dr. Samer Arandi - An-Najah National University The creation of the n-well regions for pMOS transistors , by impurity implantation into the substrate . A thick oxide is grown in the regions surrounding the nMOS and pMOS active regions . The thin gate oxide is subsequently grown on the surface through thermal oxidation . The creation of n+ and p+ regions ( source , drain and channel- stop implants ) . The metallization is created ( creation of metal interconnects ) . Lithography © Dr. Samer Arandi - An-Najah National University Each processing step requires that certain areas are defined on chip by appropriate masks . Consequently , the integrated circuit may be viewed as a set of patterned layers of doped silicon , polysilicon , metal and insulating silicon dioxide . In general , a layer must be patterned before the next layer of material is applied on chip . The process used to transfer a pattern to a layer on the chip is called lithography . Thermal oxidation of the silicon surface : an oxide layer of about 1 micrometer thickness is created on the substrate , see ( b ) . The entire oxide surface is covered with a layer of photoresist , which is a light-sensitive , acid-resistant organic polymer , initially insoluble in the developing solution ( c ) . The photoresist material is exposed to ultraviolet ( UV ) light , the exposed areas become soluble so that the they are no longer resistant to etching solvents . To selectively expose the photoresist , we have to cover some of the areas on the surface with a mask during exposure . Thus , when the structure with the mask on top is exposed to UV light : areas which are covered by the opaque features on the mask are shielded . areas where the UV light strikes the photoresist , it is “ exposed ” and becomes soluble in certain solutes ( d ) . © Dr. Samer Arandi - An-Najah National University Basic Steps PhotoResist After the PR is applied , the wafer is heated ( ~160C ) to evaporate the solvent , leaving a smooth solid coating . The type of photoresist which is initially insoluble and becomes soluble after exposure to UV light is called positive photoresist . PhotoResist normally comes in powder form , which is insensitive to light . It is reconstituted into liquid form by adding a solvent , typically alcohol . The wafer is mounted on a turntable , spinning slowly , and the photoresist is discharged into its center . Centrifugal force spreads the resist outward across the wafer . The thickness that remains on the wafer is a function of the rate of wafer spin and the viscosity of the photoresist . The thickness is monitored by light diffraction , which is used to adjust the spin rate to reach the correct PR thickness . Phase Interference gives Photoresist Thickness © Dr. Samer Arandi - An-Najah National University Following the UV exposure step , the © Dr. Samer Arandi - An-Najah National University unexposed portions of the photoresist can be removed by a solvent . The silicon dioxide regions which are not covered by hardened photoresist can be etched away either by using a chemical solvent ( HF acid ) or by using a dry etch ( plasma etch ) process ( e ) . At the end of this step , we obtain an oxide window that reaches down to the silicon surface ( f ) . The remaining ( unexposed ) photoresist can be stripped from the silicon dioxide surface by using another solvent , leaving the patterned silicon dioxide feature on the surface , see ( g ) . The fabrication of semiconductor devices requires several such pattern transfers to be performed on silicon dioxide , polysilicon , and metal . The basic patterning process used in all fabrication steps , however , is quite similar to the one shown . Summary 9 steps to make this simple hole : Oxidize silicon surface Deposit photoresist Anneal photoresist Mount mask above silicon Expose to UV light Develop photoresist Etch photoresist exposed to UV Etch SiO2 through photoresist hole Remove photoresist © Dr. Samer Arandi - An-Najah National University Making a CMOS device The oxidation of the silicon ( field oxide ) is created on the surface ( b ) . The field oxide is selectively etched to expose the silicon surface on which the MOS transistor will be created ( c ) . The surface is covered with a thin , high-quality oxide layer which will eventually form the gate oxide of the MOS transistor ( d ) . A layer of polysilicon ( polycrystalline silicon ) is deposited ( e ) . Polysilicon is used both as gate electrode material for MOS transistors and also as an interconnect medium in silicon integrated circuits . The resistivity of polysilicon is reduced by doping it with impurity atoms . The polysilicon layer is patterned and etched to form the interconnects and the MOS transistor gates ( f ) . © Dr. Samer Arandi - An-Najah National University Making a CMOS device The thin gate oxide not covered by polysilicon is also etched away , which exposes the bare silicon surface on which the source and drain junctions are to be formed ( g ) The entire silicon surface is then doped with a high concentration of impurities , either through diffusion or ion implantation ( in this case with donor atoms to produce n-type doping ) . ( h ) shows that the doping penetrates the exposed areas on the silicon surface to create two n-type regions ( source and drain junctions ) in the p-type substrate . Note that the polysilicon gate , which is patterned before doping actually defines the precise location of the channel region and , hence , the location of the source and the drain regions . ( self-aligned process ) Once the source and drain regions are completed , the entire surface is again covered with an insulating layer of silicon dioxide ( i ) . The insulating oxide layer is then patterned in order to provide contact windows for the drain and source junctions ( j ) . © Dr. Samer Arandi - An-Najah National University The surface is covered with evaporated aluminum ( 5000A ) which will form the interconnects ( k ) . Finally , the metal layer is patterned and etched , completing the interconnection of the MOS transistors on the surface ( l ) . © Dr. Samer Arandi - An-Najah National University Making a CMOS device We have covered the basic process steps for pattern transfer through lithography , and gone through the fabrication procedure of a single n-type MOS transistor . The n-well CMOS integrated circuits fabrication follows the same steps , however for creating two devices : N-MOS and P- MOS . The first lithographic mask defines the n-well region . Donor atoms , usually phosphorus , are implanted through this window in the oxide . Once the n-well is created The rest of the steps follows similarly © Dr. Samer Arandi - An-Najah National University The N-Well Fabrication Process Operational Amplifiers Analog Interface Dr. Manar Qamhieh Fall 2015 Digital Electronic Circuits 66332 Computer Engineering Department 1 NOTE : the content of these slides is collected from various sources ( books , websites and author pages ) , no originality is claimed . 2 Interface : is to connect devices in a compatible manner Everything in nature is analog Digital circuits are more stable and more reliable than analog circuits Analog Interface : is the techniques that are used to allow digital circuits to monitor and control analog devices . Analog Interface 3 Analog Interfacing Applications Analog Comparator : An op-amp circuit to know if the analog signal has exceeded a particular threshold or not . Open-Collector Buffer for DC devices or Electromechanical Solid-state relay for AC devices : To control the ON/OFF state of an analog device . Digital-to-Analog ( DAC ) and Analog-to-Digital ( ADC ) circuits : The interface of such circuits require the interface between an Op-Amp and a logic gate . 4 Operational Amplifier ( Op-Amp ) Op-Amp circuit is invaluable for the processing of analog signals . It processes signals in the same way logic gates process digital signals . It can be used to amplify , attenuate and offset analog signals . It can be used to separate different elements of a circuit from each others . It is the universal analog IC because it performs all analog tasks : comparator , one-bit A/D , amplifier , level-shifter , filter , current source , voltage source and many other applications . Op-Amp : Pin Description Op-Amps are differential amplifiers where the output is dependent on the voltage difference applied to its two inputs . Op-Amp is designed to be an almost ideal control device ( a voltage-controlled voltage source ) . Pin Description Two input pins Two power supply pins An output pin 5 6 Op-Amp : Pin Description Input port consists of an inverting input V ( - ) and a non-inverting input V ( + ) . These values can be positive or negative based on the circuit . The difference voltage Vid = V ( + ) - V ( - ) Power supply pins are V+ and V- Typical values are ±12v and it may be as high as ±18v . Output voltage is dependent on Vid , and it is limited to approximately 1v less than the supply voltage . These values are often referred to as ±Vsat . Op-Amp : Idealized Abstract Model Input impedance is infinity . Output impedance is zero . No connection between input & output ( open-loop ) . The Open-loop gain AOL ( the factor by which the input voltage is amplified ) 7 is infinity . Vout = AOL * Vid This is the mathematical representation of a voltage-dependent voltage source controlled by Vid Input circuit is separated from the output circuit . 8 Op-Amp : Abstract Model At low frequencies , AOL is between 100 and 100,000 at dc . Hence , It is normal for an open-loop op-amp circuit to operate in saturation Vout = ±Vsat For an output not to be in saturation , Vid should be as small as : Vid < ( Vsat / AOL ) Accordingly , if Vsat = +11v and AOL = 100,000 , then Vid must be less than 110µv . Ap-Amp : Open-Loop Saturation Mode Without feedback , the output of an op-amp is always in saturation . Large gain saturates the output with only tiny difference voltage on the input port . The output is either +Vsat or -Vsat , hence the operation is nonlinear . 9 Op-Amp : Open-Loop Output Voltage Tiny input difference voltage ( ±50µv ) Output has linear parts , but signal get trimmed when voltage saturates 10 Op-Amp : Open-Loop Output Voltage 11 Input difference voltage ( ±5v ) Output signal is pulse like , since linear parts are tiny when compared to saturated parts 12 Op-Amp : Closed-Loop Configuration An Op-Amp operates in closed-loop when a portion of its output is fed back to its inverting input pin V ( - ) . -- negative feedback -- Normally in Closed-Loop operation , the op-amp responds linearly to its input . Op-Amp : Why Negative Feedback ? We can add a resistor and a capacitor to model the accumulation of charge in an op-amp . This is not an accurate representation of the inside of an op-amp , but it is a model of how an op-amp works ! 13 Op-Amp : Why Negative Feedback ? If Vi suddenly increases VO = AOL ( Vi-V- ) increases Current flows into capacitor ( charges ) VO gradually increases the difference ( V+-V- ) decreases Less current flows and VO approaches a final value equal to Vi Negative feedback 14 Op-Amp : Why Negative Feedback ? If Vi suddenly decreases VO = AOL ( Vi-V- ) decreases Current flows out of the capacitor ( discharges ) VO gradually decreases the difference |V+-V-| decreases Less current flows and VO approaches a final value equal to Vi Negative feedback 15 Op-Amp : Why Negative Feedback ? 16 If Vi suddenly increases VO = AOL ( V+-Vi ) decreases Current flows out of the capacitor ( discharges ) VO gradually decreases The difference ( V+- Vi ) increases Positive feedback Op-Amp : Why Negative Feedback ? If Vi suddenly decreases VO = AOL ( V+-Vi ) increases Current flows into the capacitor ( charges ) VO gradually increases The difference ( V+- Vi ) increases Positive feedback of an op-amp is unstable Positive feedback 17 Op-Amp : Inverting Amplifier Vin is applied to Ra and it is not Vid Key assumptions : if output is not saturated , Vid must be nearly 0v ( less than 110µv ) if Vid = 0 , the summing node must be at 0v ( virtual ground ) No current flows into the op-amp inputs ( typically , input resistance of op-amp pins are greater than 1MΩ ) Summing node 18 19 For AOL ≅ 100,000 , and the ratio Ra / ( Ra+Rb ) not less than 0.001 . Then : Vout ≅ - ( Rb / Ra ) * Vin The relation between the input and the output voltage is almost independent Open-Loop gain AOL of the Op-Amp , and dependent only on resistor ratio . The Closed-Loop gain ACL of this circuit is ACL = - Rb / Ra Op-Amp : Inverting Amplifier Op-Amp : Non-Inverting Amplifier The input voltage Vin is connected to V ( + ) pin of the Op-Amp . Key assumptions : if op-amp is not saturated , then Vid is so small ( ≅ 0v ) The summing node is biased at a voltage equal to Vin Input current of op-amp is zero . 20 21 Op-Amp : Non-Inverting Amplifier For large value of Open-loop gain ( AOL ≅ 100,000 ) : Vout ≅ [ 1+ ( R2 / R1 ) ] * Vin The closed-loop gain ACL of this circuit is : ACL = 1 + R2 / R1 22 Op-Amp : Choice of Resistors The gain of closed-loop circuits is based on the ratio of the resistors and not on their actual values . The designer can choose any desired value within practical limits . The values of resistors determine the current drain and the effect stray capacitance will have . If values of resistors are too low higher current is required for Op-Amp operation , which leads excessive dissipation . self-heating of the chip , If values of resistors are too high an increase in noise and parasitic capacitances leads to instability and oscillation 23 Op-Amp : Closed-loop Circuits Advantages of closed-loop circuits ( inverting & non-inverting ) : Vout is not dependant on AOL , but on the values of resistors . Resistors are more stable , reliable and very insensitive to temperature than AOL . It becomes a precision circuit , because ACLis dependant on passive components ( resistors ) which can be very accurate . Disadvantage : Closed-Loop gain ACL is much less than the Open-Loop gain AOL . ACL is between 1 and 1000 . 24 Op-Amp : Closed-Loop Circuits The power supply pins V+ and V- are necessary to power the op-amp The op-amp uses current from the power supplies to regulate the output voltage and to supply the necessary output current . They are not included in the analysis of closed-loop circuits , because : the used KCL calculation does not yield a useful relation . calculating the current through a voltage source rarely provides useful insights . A voltage source can support any current . Op-Amp : Bandwidth Typically , op-amps are used for comparatively low frequencies ( where AOL is large ≃+100 , 000 ) . At high frequencies , the gain falls below unity ( A < < 1 ) . Op-Amp bandwidth depends on the process used to make the op-amp . BJT op-amps have the highest bandwidth and current drain . MOSFET op-amps the lowest bandwidth and current drain . 25 26 Op-Amp : Bandwidth In closed-loop circuits , we assumed that AOL is so large so as to calculate the Closed-loop Gain ACL . At high frequencies , when A drops below ( R2+R1 ) /R1 ( where R1 is the input resistance ) , ACL drops too . The frequency at which ACL falls below the ideal gain is called the closed- loop bandwidth fCL . 27 fCL = fU / AN where fU is the unity gain frequency and AN is the noise gain The noise gain is modeled as a voltage source at the positive input of the op-amp . Hence : AN = ACL = ( R1+R2 ) / R1 Op-Amp : Non-Inverting Bandwidth 28 Example : Consider a non-inverting amplifier having a fU = 10MHz and R1 = R2 = 10㏀ . What is its closed-loop bandwidth fCL ? fCL = 5MHz Op-Amp : Non-Inverting Bandwidth 29 Unity gain frequency is called the Gain-Bandwidth-Product ( GBP ) . The product of Noise Gain AN and bandwidth fCL is constant and bounded by GBP . If you need : a higher AN , then the bandwidth fCL drops . a higher bandwidth , then you must choose a lower gain . both higher gain and bandwidth , then you need to pick an op amp with a higher GBP ( fU ) on its data sheet . Op-Amp : Non-inverting Bandwidth 30 Op-Amp : Inverting Bandwidth The bandwidth frequency fCL of inverting circuit has the same value of non- inverting frequency . fCL = fU / AN , where AN = ( R1+R2 ) / R1 Disadvantage of inverting circuit : signals are amplified by R2/R1 ratio , but the bandwidth is dependent on the larger ratio ( R1+R2 ) /R1 Previous Example : ACL is equal to -10k/10k = -1 , while AN = 2 . Hence , fCL = 10MHz / 2 = 5MHz Op-Amp : Unity Gain Buffer In a non-inverting amplifier with ACL = ( Rin+R1 ) /Rin If Rin is very large w.r.t . R1 , then ACL becomes 1 Vout = Vin → this circuit is a unity gain buffer Rin is usually deleted , while R1 can be shorted . R1 ( usually 20kΩ ) is included in many buffer designs to protect the inverting input from an over voltage 31 Using a variable voltage to control a motor From a power supply voltage = 15v , we need 7.5v for the motor . We can use a voltage divider with two equal resistors The voltage of the motor depends on the resistance of the motor . For example , if the resistance of the motor is equal to 100Ω , then the voltage of the motor will be very close to 0 . Op-Amp : Application of Unity Gain Buffer 32 The use of a unity gain buffer separates the input circuit from the output . The voltage of the motor will stay 7.5v no matter what the resistance of the motor . The resistance of the motor specifies the maximum current to pass through the motor . Op-Amp : Application of Unity Gain Buffer 33 Op-Amp : Summing Inverter It is an amplifier with multiple inputs . It sums the effects of its inputs . Vout = - [ V1/R1 + V2/R2 + ... ] * RF This circuit is equivalent to a three-channel amplifier with each channel having a separate gain ( -RF/Rn ) 34 Op-Amp : Differential Amplifier It amplifies the difference between signals applied to the inputs . By using superpositioning and assuming that RG = RG ’ and RF = RF ’ Vout = ( V1 - V2 ) * RF / RG This circuit rejects the common-mode portion of the input signal if noise voltages appear between grounds , the noise will be suppressed by the common-mode rejection ( CMR ) of the differential amplifier . 35 Op-Amp : Differential Amplifier For proper operation , input resistors ( RG & RG ’ ) and feedback resistors ( RF & RF ’ ) must be matched . The CMR of the differential circuit depends on this matching . Problem : If the driving impedance ( from V1 and V2 ) is not low compared to input resistors , then additional errors will be introduced to the circuit which affect the ratio of resistors and the operation of the circuit . 36 Op-Amp : Differential Amplifier Solution : 37 38 Op-Amp : Instrumentation Amplifier High gain differential amplifiers with high input impedance and a single ended output . Eliminates the need for input impedance matching . Low noise and very high common-mode rejection ratio . Suitable for use in measurement and test equipments where it is mainly used to amplify very small differential signals from certain kinds of transducers or sensors . Provides great accuracy and stability of the circuit . Op-Amp : Instrumentation Amplifier 39 40 Op-Amp : Video Amplifier Video signals can suffer deterioration over relatively short cable distances . Video amplifiers are used to compensate for that loss . Video signals contain high frequencies . These signals use coaxial cable to transmit and receive signals . The used cable has a characteristic impedance of 75Ω . In video amplifiers , op-amps must have input and output impedances matching the 75Ω To prevent reflections which cause distortion and ghosting of video signals Op-Amp : Video Amplifier Non-inverting circuit is used . RIN = 75Ω ( since input impedance of op-amp is very high ) . RF and RG have high values ( in kΩ ) to have minimal affect on input or output impedances . A matching resistor RM is placed in series with the op-amp output so as to raise output impedance to 75Ω . A terminating resistor RT is placed at the input of the next stage to match the cable . 41 Op-Amp : Video Amplifier RM = RT they form a voltage divider of 1/2 Very often , RF is selected to be equal to RG , so as the non-inverting circuit has a gain ACL = 2 Hence , the video amplifier has a unity gain ( 2 * ½ = 1 ) 42 Op-Amp : Input Offset Voltage VOS e Ideal : if both inputs of an op amp are at exactly the sam voltage , then the output should be at zero volts . Practical : The input stage of the op amp consists of a differential pair of transistors . If the two transistors are not perfectly matched , this mismatch will show up as a non-zero DC offset at the output . 43 Op-Amp : Input Offset Voltage VOS Input Offset Voltage VOS is a small differential voltage which is applied to the inputs of an op-amp to force the output to zero . VOS is modeled as a voltage source in series with the non-inverting input of the op- amp . 44 45 Op-Amp : Input Offset Voltage VOS Ranges Chopper Stabilized / Auto-zeroed Op Amps : General Purpose Precision Op Amps : Best Bipolar Op Amps : Best JFET Input Op Amps : High Speed Op Amps : Untrimmed CMOS Op Amps : DigiTrim™ CMOS Op Amps : < 1µV 50-500µV 10-25µV 100-1,000µV 100-2,000µV 5,000 - 50,000µV 100µV - 1,000µV 46 Op-Amp : Input Offset Voltage VOS Input Offset Voltage VOS varies with temperature . TCVOS is its temperature coefficient , or drift . Offset drift is affected by the offset adjustments to the op-amp . Most op-amps have a specified value of TCVOS Typical drift values for a range of general purpose precision op amps lie in the range 1-10 µV/°C Maximum VOS may be provided over the operated range of temperature . It is less useful because there is no guarantee that TCVOS is constant or monotonic . The Offset Voltage VOS changes as time passes ( aging ) . Generally , aging is specified in µV/1000 hours . It is proportional to the square root of the elapsed time . Op-Amp : Measuring Input Offset Voltage VOS Measuring VOS ( µv ) requires that the circuit does not introduce more error than VOS itself . The circuit amplifies the input offset voltage by the noise gain of 1001 . The Vout is measured using an accurate digital voltmeter . 47 Op-Amp : Adjusting VOS ( Null Pins ) Many single op amps have pins available for optional offset null . Two pins are joined by a potentiometer , and the wiper goes to one of the supplies through a resistor , Wiper connection may be to either +VS or -VS depending on the op amp . Values for R1 and R2 depend on op amp . Use to null out the op amp input offset voltage , not the overall system offsets . There may be high gain from offset pins to output . Nulling offset causes increase in offset temperature coefficient , approximately 4 µV/°C for 1mV offset null for FET input amplifiers 48 Op-Amp : Adjusting VOS ( External Method # 1 ) Injecting current into the inverting input of \n inverting amplifier circuit . Disadvantage a possible increase in noise gain , due to the parallel path of R3 and the potentiometer resistance . Noise gain may be reduced by making ±VR large enough so that the R3 value is much greater than R1II R2 if the power supplies are stable and noise-free , they can be used as ±VR . Otherwise , separate regulated low noise ( filtered ) sources should be used . 49 Op-Amp : Adjusting VOS ( External Method # 2 ) injecting a small offset voltage into the non-inverting input . Advantage no noise gain increase Disadvantage It requires adding RP If the op amp has matched input bias currents , then RP should equal R1II R2 ( to minimize the added offset voltage ) . Otherwise , RP should be less than 50Ω . 50 Op-Amp : Adjusting VOS ( External Method # 3 ) Injecting a small offset voltage when using an op amp in the non-inverting circuit . It works well for small offsets , where R3 can be made much greater than R1 . The signal gain might be affected as the offset potentiometer is adjusted . The gain may be stabilized , if R3 is connected to a fixed low impedance reference voltage sources , ±VR . 51 Op-Amp : Input Bias Current Ideal Op-Amp : No current flows into input terminals Practical Op-Amp : There are two input bias currents IB+ & IB- IB can vary from 60 fA to many µA , depending on the device . Some structures have well-matched IB , others do not . In some structures , IB varies little with temperature . Some structures have IB which may flow in either direction . Bias current is a problem for the op amp user it flows in external impedances and produces voltages , which add to system errors . 52 53 Op-Amp : Input Offset Current IOS IOS is the difference between the two input bias currents . ○ IOS = IB+ - IB- IOS is meaningful where the two individual bias currents are fundamentally reasonably well-matched . This is true for most voltage feedback ( VFB ) op amps . Op-Amp ’ s input stages comprise of two complementary parallel stages which have bias currents that change direction as the common-mode voltage passes through the transition region . Bias and offset currents for these devices are especially difficult to specify , other than simply giving a maximum positive/negative value . Op-Amp : Internal Bias Current Cancellation Necessary bias currents are provided via an internal current source . External current flowing in the input terminals of the op-amp is the difference current between the base current and the current source . Pros Low offset voltage and drift , low bias current and voltage noise . Cons Poor bias current match , higher current noise , not very useful at high frequencies . Most modern precision bipolar input stage op amps use some means of internal bias current compensation . 54 55 Op-Amp : Internal Bias Current Cancellation In many cases , the bias current compensation feature is not mentioned on data sheets , and a simplified schematic is n't supplied . How to verify ? Examine the bias current specification . If bias current is specified as a “ ± ” value , the op amp is most likely compensated for bias current . To do so , examine the offset current specification : If internal bias current compensation exists , the offset current will be of the same magnitude as the bias current . Without bias current compensation , the offset current will generally be at least a factor of 10 smaller than the bias current . Op-Amp : Cancelling Bias Current ( External ) Bias currents should be well matched simple bipolar input stage op amps not internally bias compensated op amps Add a bias compensation resistor R3 ( = R1 || R2 ) to the non-inverting input . It provides a voltage drop equal to the one on the inverting input of the op amp . This method should not be used when bias currents are not well matched . It makes matters worse ! 56 Op-Amp : Cancelling Bias Current ( External ) Large resistance RS in series with the input to be tested . Typically , RS values vary from 100KΩ for BJT op amps to 1000MΩ for FETs . It creates an offset voltage = IB * RS The change in VOS ( previously measured ) due to RS can be measured , which leads to IB . IB is the average of IB+ and IB- 57 Op-Amp : Offset Errors due to VOS and IB Errors ( due to offset voltage and induced offset voltage from bias current ) are Referred To the Input ( RTI ) or Referred to the Output ( RTO ) of the op amp . 58 Op-Amp : Offset Errors due to VOS and IB RTI is useful to compare the cumulative op amp offset error to the input signal . RTO is useful if the op amp drives additional circuitry , to compare the net errors with that of the next stage . 59 60 Op-Amp : Minimize Errors Keep input/feedback resistance values as low as practical , to minimize offset voltage due to bias current effects . Use a bias compensation resistance with VFB op amps not designed with internal bias compensation . Bypass this resistance , for lowest noise pickup . If a VFB op amp does use internal bias current compensation , do n't use the compensation resistance . Choose an appropriate precision op amp specified for low offset and drift . Operational Amplifier 2 Current Source & Comparators The content of these slides is collected from various sources ( books , websites and author pages ) , no originality is claimed Digital Electronic Circuits 66332 Computer Engineering Department Dr. Manar Qamhieh Fall 2015 1 Precision Voltage to Current Converter A nearly ideal voltage controlled current source . The input voltage to be converted is applied to the non-inverting input of op amp . The inverting input terminal is connected in feedback to one end of the resistor R1 and the source of the transistor M1 . The output of the op amp drives the gate of the transistor . 2 Precision Voltage to Current Converter Key considerations : No current enters the inputs of the op amp . The op amp automatically adjusts its output to bring its inverting input to the same voltage of its non-inverting input . No current enters the gate of the transistor M1 . Hence The high AOL of the op amp forces the gate of M1 to the required voltage such that VIN appears across R1 . The drain current passes through R1 and it is equal to VIN / R1 . Cons : unidirectional current source . 3 Current Source : Basic Howland Current Pump Pros : Bidirectional current source ( controlled by the difference of input voltages ) AC currents ratios R1/R2 and R3/R4 are the same . 4 Basic Howland Current Pump : Analysis R1 = R R2 = R R3 = R R4 = R Modified circuit 5 R1 = R2 = R3 = R4 = R V-input = 0 Vout = 2 VX ( non-inverting circuit ) Output current is controlled by V+input and the value resistor of the circuit and it is independent of the load resistor . Basic Howland Current Pump : Analysis Example 1 : Consider V+input = 10v R = 10kΩ Iout = 1mA Suppose that the load has a resistance equal to 1kΩ VX ( voltage drop over RL ) = 1v Even with this load resistor , the output current Iout remains 1mA . R1 = R R2 = R R3 = R R4 = R 6 Basic Howland Current Pump : Analysis 7 R1 = R R2 = R R3 = R R4 = R Example 2 : no load : RL = 0 , VX = GND No current passes through R3 , R4 Vout = 0 , hence , IR2 = 0 Iout = IR1 = V+input / R = 1mA Example 3 : RL = 5kΩ Iout = 1mA ( controlled by Vin & R1 ) VX = 5v , Vout = 10v Iout = IR1 + IR2 = 0mA + 1mA Test other values of RL ( 2k , 6k , … ) . What do you notice ? Basic Howland Current Pump : Analysis 8 R1 = R R2 = R R3 = R R4 = R Output voltage of op amp is not fixed . negative & positive feedbacks The load current Iout remains constant ( related to V+in ) what varies to accommodate the changes in load is the op amp output voltage Output current is independent of the load . Basic Howland Current Pump : Analysis The constant current source of the output ( Iout ) is guaranteed as long as the op amp does not saturate . Vout required by the load should not exceed the power supply voltage of the op amp . Example : Consider R = 10kΩ , V+in = 10v RL = 10kΩ , Vsupply = ±15v Iout = 1mA VX = 10v Not possible . This is well above most op amp positive power supply voltages 9 R1 = R R2 = R R3 = R R4 = R Basic Howland Current Pump : Limitations Inefficiency Op Amp has to put out a lot of drive if the load voltage swings a lot Output capabilities & limited Iout Output node does not swing very close to the rail Example : R = 1kΩ , V+in = 10v , Iout = 10mA RL = 1kΩ VX = 10v , Vout = 20v R1 = R R2 = R R3 = R R4 = R 10 Improved Howland Current Pump Avoids the weaknesses of the basic Howland current pump . Helps the op amp output voltage to exceed the op amp supply voltage . The op amp is still limited by the current it can source . Additional resistor R2 between the non- inverting input V+ of op amp and the output node VX . 11 Improved Howland Current Pump Consider R4 = R5 RL = 0 , VX = GND General form of Vin/Iout transfer function . 12 Improved Howland Current Pump 13 Special case : R1 = R2 + R3 Example : R1 = 10kΩ , R2 = 9.9kΩ , then R3 = 100Ω . V+input = 10v IR2 = 502.5 µA V+ = 4.975v Vout ≅ 9.95v IR3 = 0.0995A Iout = 100mA This current is achieved without saturating the op amp . The choice of resistors makes the output voltage proportional to the numeric value of Iout Improved Howland Current Pump For this special case : R1 = R2 + R3 The relation between Iout and V+input is provided as follows : ○ By simplifying the terms , it becomes : 14 Op Amp as Comparator Basic non-inverting op amp comparator Voltage transfer characteristics Vref = 0 15 Voltage transfer characteristics Vref ≠ 0 16 Op Amps as Comparators Common features : Both comparators & op amps have two input terminals ( inverting and noninverting ) and an output which swings from rail to rail . Both have low offset , high gain and high common-mode rejection . Comparator Gives a logic output indicating the relative potentials on its two inputs . Op Amp Amplifies the differential voltage between its two inputs and it is designed always to be used in closed-loop applications . 17 It is not recommended to use op amps as comparators Despite these differences , it is still tempting to use op amps as comparators . Op Amps as Comparators ❏ Comparators are designed to work open-loop ❏ they are designed to drive logic circuits ❏ they are designed to work at high speed even when over-driven ❏ Op amps are designed to work in closed-loop ❏ they are designed to drive simple resistive or reactive loads ❏ They are slower when over-driven due to saturation Op Amps as Comparators Advantages of using op amps as comparators : Convenience and economy : They are cheaper and they come usually in packages containing two or four op amps . So it is better to use the “ spare ” op amp of the package as comparator instead of buying a separate comparator . Low Bias Current IB and Low Offset Voltage VOS : Comparators are designed for clean and fast switching . As a result , they have worse dc parameters than op amps . It is more convenient to use an op amp as a comparator in applications requiring low VOS , low IB and wide CMR . Disadvantage of using op amps as comparators : Slower speed output levels and input structure stability and hysteresis 18 Speed Problem in Op Amp Comparators 19 Op amp comparator suffers from saturation which makes it slower than the same op amp used in closed-loop . Comparators are used with large differential input voltages Closed-loop op amps operate with their input voltages minimized by negative feedback . When op amp saturates due to overdriving , some of its stages may saturate and it requires a certain delay to come out of saturation . Speed Problem in Op Amp Comparators 20 When op amp saturates due to overdriving , some of its stages may saturate and it requires a certain delay to come out of saturation . The desaturation time of an over- driven op amp is longer than its normal group delay ( the time the signal takes from input to output ) . Desaturation time depends on the amount of overdrive . Op Amps as Comparators : Interface Circuit Usually , the output of a comparator is designed to drive logic family or families . Op amps has rail-to-rail output maximum positive output is close to positive supply and the minimum negative level is close to the negative supply . If logic and op amp share the same supply , then a rail-to-rail op amp will drive TTL and CMOS logic families . Notice that for an op amp with ±5v supplies , the logic may be damaged when -5v is applied . If logic and op amp have different supply , then an additional interface circuit is necessary . 21 Interfacing Circuit : Using Inverters 22 The simplest interface is done using inverters NPN transistors can be used but they consume base current . NMOS are more convenient . ○ +VA must be more positive than -VL by a voltage difference enough to turn on the NMOS transistor . -VA must be less than -VL RB sets the base current and RL sets the collector/drain current Interfacing Circuit : Using CMOS CMOS can be used as inverter in the interfacing circuit It draws no standby current , hence it has lower power dissipation The op amp positive supply +VA must be equal to or greater than +VL The op amp negative supply -VA must be equal to or smaller than -VL 23 The interface between op amp comparator and ECL logic family requires 3 resistors . The ratio of R1 , R2 and R3 is set to respect the following requirement : when the op amp output is at +VA , the voltage level at ECL input is -0.8v . when the op amp output is at -VA , the voltage level at ECL input is -1.8v . Why there aren ’ t many applications in which op amp comparators are used to drive ECL logic circuits ? Interfacing Circuit : Using ECL 24 Some older types of op amps suffer from a phenomenon called the “ phase inversion ” This happens when the input common-mode voltage ( average voltage of V+ and V- ) is exceeded . One of the internal stages of the op amp no longer has sufficient bias voltage and it turns off . The output voltage swings to the opposite rail until the input comes back within the common-mode range . It is so important to ensure that the op amp comparator is free from phase inversion or that the system is designed to so that the comparator inputs never approach the region which causes inversion . 25 Problem of Phase Inversion Op amp comparators work at their full open- loop gain and may suffer from instability due to feedback from stray capacity or due to common ground impedances . A comparator normally changes its output state when the voltage between its inputs crosses through approximately zero volts . When the input voltage difference is near 0 , any noise can cause undesirable rapid change of the output . Instability and Hysteresis 26 Instability and Hysteresis 27 Single reference voltage range of reference voltages ( hysteresis ) tage To prevent output oscillation , a small hysteresis of few millivolts are integrated into comparator . Instead of one switching point , hysteresis introduces two : rising ( positive ) voltage and falling ( negative ) vol Positive feedback is used to produce hysteresis . The amount of hysteresis is predictable and is controlled by the ratio of the positive feedback resistors . Instability and Hysteresis 28 A Schmitt Trigger is a comparator circuit with hysteresis implemented by applying positive feedback to the noninverting input of an op amp . The output retains its value until the input changes sufficiently to trigger a change Two threshold voltages : Positive and negative voltages . Instability and Hysteresis 29 Schmitt Trigger An inverting Circuit A non-inverting Circuit 30 1 Data Conversion Systems Digital Electronic Circuits Manar Qamhieh 2 Digital-to-Analog Converter ( DAC ) DACs accept digital inputs and provide analog outputs . The number of their digital input lines varies between 6 ( low cost ) and 16 input lines ( expensive DACs ) . Application example : The speed of a DC motor depends on the voltage ( or current ) applied to its field windings . A DAC system can be used to control the speed . The DAC should output a continuous range of voltages from zero to some full-scale maximum to be used as an input to the DC motor . DAC System 3 DAC System The transfer curve of a DAC shows a graph of the analog output voltage vs. binary inputs . As the binary input increases , the analog output steps up in a staircase fashion ( monotonicity ) . The size of each step is : n step size = VFS / 2 where VFS is the full-scale output voltage and n is the number of binary input bits . A 3-bit DAC 4 5 DAC System Example : A certain 8-bit DAC has VFS = 5v . Calculate the step size and the maximum output voltage for this DAC . Solution : Step size Maximum output voltage = 5 / 28 = 19.53mV = 255 * 19.53mV = 4.98V This corresponds to one step ( or 1 bit ) less than the full scale . Increasing the number of binary bits , the step size will decrease . Resolution of a DAC is the same as its step size . DAC System The accuracy of a DAC depends on several factors : Quantization error : fractional steps are not possible when an output voltage is required , which causes a worst-case error of ±1/2 LSB ( least significant bit ) . An 8-bit DAC with VFS = 5V can produce output steps of 19.53mV . For an output of 4v , 205 steps are required ( instead of 204.8 steps ) which corresponds to 4.004V ( 4mV of error ) . Offset and gain errors : Offset error : when the binary input is 0 , the output of a DAC may not be 0 . Gain errors : they cause the slope of the transfer curve to bend upward or downward due to imbalances with DAC . Both errors can be nulled via an external potentiometer . 6 DAC System The accuracy of a DAC depends on several factors : Nonlinearity : the maximum deviation of the transfer curve from a straight line drawn between zero and full scale . It is due to the mismatching of components within the DAC and can not be easily removed . Settling line : this is the time required by the DAC to settle to within ½ LSB after receipt of the binary input . It ranges from less than 100ns for some high-speed DACs to more than 1µs for low-cost versions . 7 Switched-Voltage R-2R DAC 8 Digital input consists of three switches that may be connected either to GND ( logic 0 ) or VREF ( logic 1 ) Switched-Voltage R-2R DAC Equivalent circuit at node A when switch D0 ( only ) is closed . 9 At each node , the current splits exactly in half . 10 Switched-Voltage R-2R DAC Example : Assume that the DAC in the previous figure has a binary input of 101 . Calculate the output voltage if VREF = 3v , R = 1kΩ and RF = 10kΩ . Vout I = 3v / [ ( 2R || 2R ) + 2R ] = 3v / 3k = 1mA ○ ○ = - ( 1 * 1m/8 + 0 * 1m/4 + 1 * 1m/2 ) * 10k = -6.25v DAC 0800 : Switched-Current Multiplying DAC 11 An 8-bit DAC . A switched-current R-2R DAC It uses a constant-current source to establish the reference current . Each data switch is connected to GND ( actual or virtual through op- amp ) . The current in each path is constant and independent of the digital input . A multiplying DAC The output current IOUT is equal to the product of the digital input and the reference current . Example : if input is 11001001 ( 201 ) and reference current is 2mA . IOUT is equal to ( 201/256 * 2mA ) = 1.57mA DAC 0800 : Interfacing Circuit Zener diode with R1 & R2 provide a 2mA reference current ( 5v/2.5k ) 12 1N914 diodes help minimizing changes in the 5v reference with temperature Multiplied output current is forced by the op amp to flow through RF . VOUT = IO * RF 13 DAC 0800 : Switched-Current Multiplying DAC Example : Calculate the full-scale output voltage , maximum output voltage and resolution of the DAC 0800 interface ( presented in the previous slide ) . The full-scale output current is IREF = 2mA Full-scale output voltage = 2mA * 5k = 10v Maximum output voltage = 255/256 * 10 = 9.96v Resolution ( contribution of 1bit ) = 1/256 * 10v = 39mv Many DACs are switched-current rather than switched-voltage . Switched-current DACs provide faster settling time because the junction capacitances of the resistors need not be continually charged and discharged . Synthesizing a Sine Wave 14 Microcontrollers can be programmed to play music or other sounds . The samples of the waveform to be produced must be stored in a table and output at a periodic rate to the DAC . Example : a synthesized version of a sine wave of 6v peak-peak produced from a 5v DC level obtained from a DAC that is programmed to receive a voltage sample every 30° . VOUT = 5v + 3v * sin θ where θ = 0° , 30° , 60° , … For VFS = 10v Output code = HEX ( [ VOUT * 256 ] / VFS ) Synthesizing a Sine Wave A complete table can be filled w.r.t . the previous equations The frequency of the output waveform produced by this DAC depends on the speed at which the software outputs the values in the table . Example : for a 1KHz frequency ( 1000µs period ) , a new sample must be output every 1000µ/12 sample = 83.3µs 15 16 Analog-to-Digital Converters ( ADC ) ADCs are integrated circuits that that are part of data acquisition systems . They accept analog inputs and provide digital outputs . Resolution of ADCs gets better by increasing the number of digital lines . Typical ADCs have 8 , 10 and 12 bits as digital lines . An ADC can provide a range of digital outputs that correspond to the variations of the analog signal being monitored . Multichannel Data Acquisition System An amplifier is necessary because usually the input signal ( from sensors ) are small . Amplifier should have high input impedance so as the ADC circuit does not to affect the signal being measured 17 Necessary if the analog signal is changing rapidly . 18 Analog-to-Digital Converter ADC The resolution of an ADC is determined by its step size , which is step size = V / 2n FS where VFS is the full-scale reference voltage and n the number of bits . Example : For a 10-bit ADC with VFS = 5v , its resolution is equal to 5/1024 = 4.88mV . This means that the input voltage has to change by at least 4.88mV for the ADC to distinguish the new input level . An input voltage of 2.5v is equivalent to 512 steps ( corresponds to 1000000000B ) , where : Binary output = BINARY ( VIN / Step Size ) ADC : Sampling 19 Conversion time ( aperture time ) : ADCs require a period of time to convert their analog input into its digital equivalent . The effect of this conversion time is to limit the ADC to taking samples of the input waveform instead of one continuous conversion . Sample-and-hold circuit is used to reduce errors due to the change of input signal during the conversion time . It consists of a capacitor and a switch . The capacitor holds the input voltage steady long enough for an accurate conversion to take place . ADC : Sampling If sampling occurs at a fast enough rate , the sampled signal will be a good representation of the input . If the sampling is done too slowly , a false ( or alias ) signal may be detected . The Nyquist criterion : If the input is sampled at a frequency that is greater than twice that of the input , the original waveform can be reproduced accurately . Sampling rates of typical ADCs are limited to 10 to 100 kHz . 20 21 A-to-D Conversion Methods Open-Loop Flash Converters Tracking Converters Successive-Approximation Converters Integrating Converters A 0-v to 4-v 2-bit flash converter 22 Open-Loop Flash Converter It converts its analog input to a digital output very quickly . Just the propagation delay times through the analog comparators and logic gates . All comparators are open-loop There is no feedback between input and output . There are 2n-1 comparators for an n-bit converter . A separate comparator for each voltage step to be detected ( 0 is not included ) The logic gate array is needed to convert the output of comparators into standard 1-2-4-8 binary . 23 Open-Loop Flash Converter Advantage : Very high speed of operation . For example , TDC1018 converter operates at speeds up t0 125 million conversions per second and it is ECL compatible and intended for high-resolution graphics displays used in image processing . Disadvantage : The number of comparators double for each additional output bit . 255 comparators for 8-bit ADCs , 4095 comparators for 12-bit ADCs . Flash converters are usually expensive and reserved for specialized applications Tracking Converters Tracking ADCs are slower than flash converters but much less costly . An analog comparator compares the analog input voltage with the output of the DAC . If the DAC is less than VIN , the output of the comparator will be pulled high . This will select the count-up mode of the counter and increase its output , which increases the input of the DAC as well . Eventually , the output voltage of DAC will exceed VIN and switches the comparator to low . The counter will start counting down until inputs of comparator are equal . 24 Tracking Converters 25 Tracking converters are good for input signals that vary slowly with time . The counter will follow the change in input and the digital output will remain close to its correct value . If the input should make a sudden change , the circuit requires a considerable amount of time to reacquire lock . In a worst case when VIN switches from 0-v to VFS or vice versa , 2n-1 clock cycles will be required before lock is obtained . 26 Successive-Approximation Converter Successive approximations can converge on the result in just n cycles instead of 2n-1 cycles required by tracking converter . In this design , the up/down counter is replaced with a successive- approximation register ( SAR ) . One conversion cycle of the SAR consists of : Set the MSB ( Most Significant Bit ) and output this result to the DAC If the DAC output is greater than VIN , reset the bit ; otherwise , leave this bit set . Repeat steps 1 and 2 , setting the next most significant bits until all n bits have been tested . Successive-Approximation Converter Example : List the analog and digital outputs produced during one conversion cycle by an 8-bit successive-approximations ADC when the analog input is 8v . Assume that VFS = 10v . 27 Successive-Approximation Converter The ability of this converter to return an accurate representation of the input voltage depends on the speed of conversion . If the input changes too rapidly , the converter can be “ fooled ” ( as in Conversion 2 ) . 28 Integrating Converters It is commonly used in digital voltmeters and multimeters . Digital Output 29 30 Integrating Converters The conversion begins with the electronic switch in the T1 position , the T3 switch is open , and the counter is reset to zero . The input voltage causes the capacitor connected to the op amp to charge at a rate dependent on the magnitude of the input voltage ( VIN/R ) . The total charge stored by the capacitor is Q1 = ( VIN * T1 ) / R After T1 seconds have elapsed , the selector switch is moved to position T2 by the control logic . 31 Integrating Converters The reference voltage is of opposite polarity to VIN , hence the capacitor discharges and the counter starts . When the capacitor fully discharges , the comparator output level switches and the counter is halted . The amount of removed charge is : Q2 = ( VREF * T2 ) / R Since Q1 = Q2 , we conclude that : VIN = ( T2 / T1 ) * VREF The value stored in the counter is directly proportional to the input voltage . The larger the input voltage , the greater the charge stored in the capacitor during T1 . Larger voltages will require more time to discharge 32 Integrating Converters Integrating converters are quite slow , requiring anywhere from 1 to 200ms for one conversion . They are used mostly in digital panel meters , when conversions should be low enough for the human eye to detect . Advantages : Simplicity and low cost . Relative immunity to noise Since sampling period T1 is long , any noise will be added/subtracted to the signal . At the end of T1 , the voltage stored on the capacitor represents the average value of the input signal over this period of time . Sensors & Driver Circuits Analog Interface Dr. Manar Qamhieh Fall 2015 Note : the content of these slides is collected from various sources , no originality is claimed . Digital Electronic Circuits 66332 An-Najah National University 1 2 Sensors and Transducers The words “ sensors ” and “ transducers ” are used to describe the measurement systems A sensor is a device that detects a change in a physical stimulus and turns it into a signal which can be measured or recorded A transducer describes the sensing element plus any additional circuitry All transducers contains sensors while most ( not all ) of the sensors are transducers . 3 Sensors and Transducers A sensor converts mainly physical phenomena such as thermoelectric , photoelectric , photomagnetic , electromagnetic , magnetoelectric , thermoelastic , thermomagnetic , thermo-optic , photoelastic , and so on Acoustic wave , spectrum , wave velocity Electric charge , current , potential , electric field , conductivity , permittivity Magnetic magnetic field , magnetic flux , permeability Optical wave velocity , refractive index , emissivity , absorption Thermal temperature , specific heat , thermal conductivity Mechanical position , acceleration , force , pressure , torque , orientation , stiffness 4 LED : Light Emitting Diode LED main applications and uses : Indicator and display device Source of visible or infrared light as carrier of data and information over short distances . A LED is a specialised type of P-N junction diode made of thin chip of fairly heavily doped semiconductor material . When it is forward biased , electrons from the semiconductor conduction band can combine with holes from the valence band , releasing sufficient energy to produce photons of light . Because of the thin chip , a reasonable number of these photons can leave it and radiate away as its light output . 5 LED : Light Emitting Diode LEDs are made from compound semiconductor materials unlike regular diodes . The choice of semiconductor material determines the wavelength of peak emission of photons and hence the colour of the emitted light . It determines also the forward voltage drop for a given amount of forward conduction current . LED : Light Emitting Diode LEDs are operated from a low voltage DC source VS with a series resistor RS to limit the forward current IF to a suitable value IF from 5.6mA of a status indicator application to 20mA or more where more light output is needed . The resistor value is simply calculated using Ohm ’ s Law : 6 LEDs are intended to operate in forward mode and should not be subjected to reverse voltage and they can be damaged by accidental reverse connection at low supply voltages . If the LED needs to be operated from an AC source or unreliable signal source , it can be protected from reverse polarity by the use of regular diodes . LED : Light Emitting Diode Reverse voltage is limited to 0.6v . No light is emitted for the negative half cycles . 7 A bridge of 4 diodes . Current always flows in the LED in forward polarity . Voltages of diodes ( 1.2v ) should be included in the calculation of RS . 8 LED : Light Emitting Diode The maximum light output from a LED is essentially limited by the maximum average forward current which it can handle . When higher light output is required , it should operate from a pulsed current with higher value and a fairly short duty cycle . This increases current and light output during the pulses while keeping the average current level and power dissipation within its ratings . LED : Light Emitting Diode Advantages of using a pulsed current : The electro-optical efficiency of LEDs increases with current level . Short pulses with higher output result in higher average light output for the same average current . The pulse repetition frequency is higher than the eye ’ s critical fusion frequency . Hence humans can not detect the gaps and the light appears brighter than continuous light . Pulses generated by 555 ( 20 % duty cycle ) to drive the LED directly or via a MOSFET . RS is required here but it should allow a value of current about 100mA 9 10 Laser Diodes ( Injection Lasers ) Laser diodes are a specialized form of LEDs . Like LEDs , they are a form of P-N junction diode with a thin depletion layer where electrons and holes collide to create light photons when the diode is forward biased . The difference is that the active part of the depletion layer ( where most current flows ) is made quite narrow to concentrate the carriers . The ends of this active part is polished or coated with thin reflective layers to act as mirrors , so as to form a resonant optical cavity . The forward current level is increased so as the current density reaches a critical level where “ carrier population inversion ” occurs . More holes than electrons in the conduction band and more electrons than holes in the valence band . Hence , very large excess population of electrons and holes can combine to release photons . New photons can be created by the influence of passing photons and random collision . 11 Laser Diodes ( Injection Lasers ) Hence , laser action is summarized as “ Light Amplification by Stimulated Emission of Radiation ” . The photons triggered by passing photons have the same wavelength and they are in phase with them . They form a continuous-wave coherent radiation . Because of the resonant optical cavity , the photons are able to travel from one end of the active region to the other , triggering the production of more photons and a lot of light energy is generated . At the end of the cavity , some of this coherent light can leave the laser chip to form its output beam . 12 Electrical Operation : Laser Diode vs . LED The electrical operation must be much more carefully controlled than the LED . Laser diode operates at a high current and has a very low forward resistance when lasing action occurs . They are at risk of destroying themselves due to thermal runaway . Operating light density can rise to a level where the end mirrors can begin to melt . The current of the laser diode should be regulated by a constant current circuit rather than a simple series resistance . Also , optical negative feedback must generally be used to ensure that optical output is held to a constant safe level . Photodiodes Photodiodes are light detectors which generate an output proportional to light level when illuminated . Features and characteristics : Low noise Low cost Excellent linearity in output current Fast response time Basic application circuit 13 Electrical Operation : Laser Diode vs . LED To make the optical feedback easier , most laser diodes have monitor diodes built right into the package . monitor diode is a silicon PIN photodiode used to receive a fixed proportion of the laser ’ s output . The output of this monitor diode is used to control the current fed through the laser by the constant current circuit for stable and reliable operation . 14 Electrical Operation : Laser Diode vs . LED Current regulator circuit of laser LEDs : The monitor diode shunts the base forward bias for transistor Q1 ( which has its emitter voltage fixed by a zener diode ) when laser output rises , the monitor diode current increases as well The conduction of Q1 reduces and hence that of transistor Q2 which controls the laser current The laser current is automatically stabilized to a level set by the adjustable resistor VR . 15 Phototransistors Phototransistor is a semiconductor light sensor formed from a basic transistor with a transparent cover . Base current formed by light photons striking its junctions . Common-Emitter amplifier circuit generates an output which transitions from high to low when it is exposed to light . When there is no light , the phototransistor is cut-off and Vout is high due to the pull-up resistor When phototransistor is exposed to light , collector current is generated and it drives the output to low . 16 Phototransistors Common-Collector Amplifier generates an output which transitions from low to high state when light is detected by the phototransistor . When there is no light , the phototransistor is cut-off and the output is low due to the pull-down resistor When there is light , the phototransistor generates collector current which drives the output voltage to high state 17 Phototransistors In both circuits , phototransistor can be used in two modes : An active mode : VCC > RL * ICC Photoresistor generates a response proportional to the received light up to a certain light level . After this level , the phototransistor operates in saturation and output will not increase . This mode is useful in applications where it is desired to detect two levels of input for comparison . A switch mode : VCC < RL * ICC Photoresistor operates either in cut-off or saturation in response to light . This mode is useful when a digital output is required for object detection or encoder sensing . The value of the load resistor RL determines the mode of operation , where RL is the pull-up or pull-down resistor in the previous circuits . 18 Smoke Detector Diodes emit light detected by photo- transistors Q1 & Q2 Top region is sealed , the base of Q1 does not change When smoke enters the lower region , the base of Q2 changes 19 Smoke Detector Due to smoke , the intensity of light decreases , the base current of Q2 decreases and Vin increases . When Vin crosses Vref , the output of the comparator switches from VL to VH which triggers the alarm 20 Temperature-Dependent Current Source LM332 is a 3-terminal adjustable current source . Excellent current regulation wide dynamic voltage range of 1v to 40v current is established with one external resistor It produces output current which is directly proportional to temperature in Kelvin . Kelvin temperature scale is 273 degrees higher than the Celsius scale ( K = C + 273 ) . ● ISET = IR + IBIAS IBIAS is a percentage of ISET 21 Temperature-Dependent Current Source RSET determines the ISET which passes through RL . For RSET = 230Ω and RL = 10kΩ , we calculate : 22 Temperature-Dependent Current Source This circuit converts the temperature-dependent current ( ISET ) into a temperature-dependent voltage ( VOUT ) . ISET ( passing through R1 ) = 0.987µA/k R3 is a series resistance with the output where its value is around ( R2/16 ) to reduce R2 value by a factor of 5 . VR = 0.987µA * 10230 ≅ 0.01v/k VOUT = ( 0.01 * 10830 ) /10230 ≅ 10mv/k 23 Temperature-Dependent Current Source Determine the output voltage produced by a temperature of 100F or higher . Temp_k = ( ( 100F - 32 ) * 5/9 ) + 273 = 311 VOUT = 10mv * 311 = 3.11v Any output voltage equal to or greater than 3.11 v corresponds to a temperature of 100F or higher . 24 Design Example : Temperature Comparator Design a circuit that produces a 600 Hz warning tone if the temperature exceeds 100F . Required elements of the circuit : LM334 temperature-dependent current source as a temperature sensor . Op amp comparator which compares the sensor voltage with a reference voltage equivalent to 100F A speaker connected to a 555 timer to generate the warning tone . 555 timer generates pulses of various durations and adjustable pulse width and frequencies . The output toggles between high and low in response to inputs . 25 CTRL VOLTAGE : controls the threshold and trigger levels . It determines the pulse width of the output waveform . For reliable operation , connect it to GND through small capacitance . RESET : negative pulse applied to this pin to disable the timer ( forces output to low ) . Connect it to Vcc when not used . THRESHOLD : compares the voltage applied to the terminal with a Vref of 2/3 Vcc and resets the timer when output exceeds this value . TRIGGER : the output depends on the amplitude of the external trigger pulse applied to this pin . When pin voltage falls below ⅓ of Vcc , the timer output goes high . DISCHARGE : open collector output discharges a capacitor between intervals . It toggles its output from high to low when voltage reaches 2/3 Vcc . Design Example : 555 Timer 26 Design Example : 555 Timer By wiring 555 timer with resistors and capacitors in various ways , it can operate in different modes : monostable mode : creates time delay . A trigger outputs a pulse of adjustable duration . astable mode : outputs an oscillating pulse at tunable frequency and pulse width . bistable mode : toggle its output between high and low states depending on the state of two inputs In our design example , we are interested in astable mode to operate the alarm at a frequency of 600 Hz . 27 Design Example : 555 Timer The output frequency is adjusted by the external RC circuit ( R1 , R2 and C1 ) In the astable mode , it is necessary to continuously re- trigger the timer after each time cycle . The retriggering is done by connecting the trigger input and the threshold input together . Hence , the timer has no stable state and it continuously switches from one state to another . C1 charges itself through R1 and R2 , but discharge through R2 ( connected to discharge pin ) . 28 Design Example : Circuit If the temperature exceeds 100F , V+ will be greater than V- and the output of the op amp will be pulled high . 555 timer will begin oscillating which allows the speaker connected to the output to produce the warning tone . 29 30 ON/OFF Control of Analog Devices Many real-world devices require large control voltages and currents incompatible with TTL and CMOS outputs of a typical digital circuit . 5-v 100-mA DC relays 12-v 2-A indicator lamps 20-to 30-v DC pulses for EPROM programmers Driver circuits using open-collector transistor ( such as standard 7400 family TTL open-collector buffers ) can be used : When the device to be controlled requires DC When the control voltage and currents are not too high TTL 7406 features high-voltage open-collector output for interfacing with high-level circuits or for driving high-current loads . It withstands voltages as high as 30v and sink currents as large as 40mA . High-level input drives the output to low-level which turns ON the controlled device . When the output is high , the output becomes an open circuit and the controlled device goes off . When output is low , 7406 must sink the device ’ s ON current without overheating or allowing its VOL level to rise above few tenths of a volt . When the output is an open circuit , the controlled device acts like a pull-up resistor . The output transistor of 7406 must then be capable of withstanding the supply voltage without breaking down . Examples : Driver Circuits using 7406 inverting buffer 31 The driver circuit of a lamp requires the use of two 7406 inverters in parallel . This is necessary because the lamp ’ s ON state current exceeds that of a single 7406 Sink current of 7406 is 30-40 mA . Examples : Driver Circuits using 7406 inverting buffer 32 Examples : Driver Circuits using 7406 inverting buffer A relay is an electromagnetic switch operated by a relatively small electric current that can turn on or off a larger electric current It consists of a coil of wire that becomes a temporary magnet when electricity flows through it Relays operate as bridge between sensitive electronic devices that produce small amounts of current ( such as sensors ) and controlled devices that uses larger currents . 33 Electromagnetic devices ( such as a relay ) store energy when powered and will generate a “ back EMF ” when the supply is switched off . EMF ( ElectroMotive Force ) is the voltage produced by the interaction of current in the coil of the electro- magnet field and its magnetic field when one or both is changing . When the electromagnet is disconnected , it acts like a current source building whatever voltage is necessary to keep the original current flowing . If the back EMF is not controlled , then the generated voltage may reduce the performance of the circuit or even damage its elements . Examples : Driver Circuits using 7406 inverting buffer 34 The relay driver circuit uses a clamp diode to protect the output transistor of 7406 from back EMF . When the 7406 output is low , the relay conducts , and the diode is reversed biased ( cut-off ) . When the output is high , the relay disconnects and it generates back EMF in the opposite polarity . The diode conducts and clamps the voltage to around 0.6v . Hence , the output pin clamps to a voltage a little bit less than the power supply . Examples : Driver Circuits using 7406 inverting buffer 35 Peripheral Drivers Peripheral drivers are general-purpose drivers with the following characteristics : They are used for applications which require high currents and voltages . They are available in many models and logic functions ( INV , AND , NAND , OR , NOR ) . They have outputs rated as high as 80v and 1.5A . They may include built-in clamp diodes to protect their outputs . They may be input-compatible with TTL and CMOS logic families . SN75447 is a dual peripheral NAND driver 36 Peripheral Drivers : Lamp Driving Application 37 The control of a high-current lamp requires peripheral driver with a “ warm-up ” circuit . The cold resistance of a lamp can be as much as 10 times less than its hot resistance . Initial current passing through the lamp could be large enough to damage it . SN75447 peripheral driver is used in this application . Both NAND gates of this driver are used . When input control is active , only Q1 is on . Q2 is off due to the capacitor until it is charged . The Q1 current is limited by the 18Ω resistor . When the capacitor charges , Q2 turns ON and the load current is shifted to this transistor . During this time , the lamp heats up and its resistance increases . 38 Peripheral Drivers : ‘ H ’ Motor Drive Circuit In this application , we use an H Bridge to fully control and drive a DC motor . We use SN75449 peripheral driver with NOR gates , to provide three modes of operation : Peripheral Drivers : ‘ H ’ Motor Drive Circuit Enable = H. transistors of driver are on and inputs of bridge are low ( current sink ) . Enable = L , Direction = L , pin 6 is open circuit . Inputs 3 and 4 of bridge are pulled high and current flows in motor in B direction . Enable = L , Direction = H , drivers 1 and 2 of bridge are enabled and current flows in the A direction , which reverses the rotation direction of the motor . ≣ 39 1 AC Control Analog Interface Electromechanical Relays ( EMR ) EMR consists of : an electromagnetic coil a moving arm and spring a set of switched contacts ( normally open “ NO ” or normally closed “ NC ” ) When current passes through the coil , a magnetic field is developed that attracts the moving arm . This opens the NC contacts and closes the NO contacts . The relay can be operated by AC or DC at a particular voltage . The coil has a specific resistance and the switched contacts carry a voltage and current ratings . 2 3 Electromechanical Relays ( EMR ) It is important to match the output current and voltage capabilities of the driver circuit to the coil of the relay . Depending on the resistance of the coil , it may be possible to drive these relays with a standard TTL gate . Disadvantages : Pitting and corrosion of the switched contacts Contact bounce Slow operation 4 Solid-State Relays ( SSRs ) It is a relay that consists of : a sensor which responds to a control signal a solid-state electronic switching device which switches power to the load circuitry a coupling mechanism to enable the control signal to activate this switch without mechanical ( moving ) parts . There are two types based on the isolation between the control switch input and the solid-state output : Isolated SSR ● Nonisolated SSR The nonisolated SSR consists of : a peripheral driver to control the current flow through a diode bridge . 2N4992 AST ( Asymmetrical Trigger ) . A solid-state bilateral switch on-state current is 200mA Forward voltage = 1.7v off-state current is 0.1µA @ 5v A TRIAC ( stands for “ TRIode for AC ” where triode is a transistor ) It has 3 terminals : Gate ‘ G ’ and Main Terminals MT1 & MT2 It is related to SCR rectifiers . 5 Solid-State Relays ( SSRs ) Silicon Controlled Rectifier ( SCR ) Silicon : a multi-layer semiconductor device Four layer ( P-N-P-N ) semiconductor device that contains 3 P-N junctions in series . Controlled : it requires a gate signal to turn it ON . Controlled by gate current . Rectifier : an electronic device that converts AC current to DC . Applications : Power semiconductor devices ( such as SCR and TRIACs ) are very fast solid state AC switches for controlling large AC voltages and currents such as lamps , AC motors and phase control applications . 6 Silicon Controlled Rectifier ( SCR ) 7 Functionality : Regenerative feedback : IC of transistor TR2 feeds directly the base of TR1 and IC of TR1 feeds the base of TR2 . Until one of the transistors is given some base current , nothing can happen even if an Anode-to-Cathode voltage is present . Anode is -ve w.r.t . Cathode : center NP is forward biased and the outer junctions are reversed biased . SCR blocks reverse current unless breakdown voltage point of the outer junctions is exceeded and the SCR conducts without the application of a Gate signal . Anode is +ve w.r.t.Cathode : outer PN junctions are forward biased but the centre NP junction is reverse biased . forward current is blocked . If a +ve current is injected into IB of TR2 , its IC flows in the base of TR1 . This causes a IC to flow in TR1 which increases the IB of TR2 and so on . 8 Silicon Controlled Rectifier ( SCR ) Unlike transistors , SCR can not be biased to stay within some active region between its cutoff and saturation states . Very rapidly , the two transistors force each other to conduct to saturation due to regenerative feedback . Once triggered , the current flowing through the device can be limited only by external resistance . Any gate signal applied after conduction has no effect on SCR since it is fully on . It is not possible to turn an SCR off by its gate signal . There are two ways : either by removing the supply voltage and therefore the Anode current completely , or by reducing its Anode to Cathode current by some external means to below a value commonly called the “ minimum holding current ” , IH . So as internal PN-junctions can recover their blocking state . TRIAC is a component that conducts current in either directions when triggered : It turns on by applying a gate current It turns off when voltage across TRIAC becomes 0v . TRIAC is capable of conducting positive and negative half period of an alternating current , provided that the gate current also alters its direction . TRIACs are related to Silicon Controlled Rectifiers “ SCR ” . SCR is a unidirectional device that only conducts current in one direction . SCR can be triggered by a positive current at its gate only . 9 TRIAC DIAC DIAC stands for DIode for AC . It is a bi-directional switch that is used with TRIACs to improve operation of AC power switching systems . Unlike TRIACs , DIACs have no gate to control its conduction It conducts after a 'breakdown ' voltage is exceeded . Similarities to TRIACs : a semiconductor switch that is turned on in both forward and reverse polarities . 10 DIAC functional Analysis : DIAC starts to conduct when the supply voltage reaches the breakover voltage ( ≅32v ) . Even when the supply voltage becomes less than 32V , the DIAC remains conductive . The DIAC only closes , when the supply voltages becomes 0V . The DIAC also works for negative voltages . Hence , a DIAC does n't have an anode and cathode like a normal diode . 11 DIAC When a DIAC conducts , it enters the region of negative dynamic resistance . When the source voltage increases the voltage drop across the DIAC decreases . Hence , a sharp increase in the level of current that is conducted by the device is achieved . Below the holding current , the DIAC reverts to its high-resistance ( non-conducting ) state . DIACs are called symmetrical triggers due to the symmetry of their characteristic curve . 12 13 DIAC and TRIAC Typically the DIAC is placed in series with the gate of a TRIAC . TRIACs do not fire symmetrically as a result of slight differences between the two halves of the device . This results in harmonics being generated . Switching characteristic of DIACs is more even than TRIACs . DIAC prevents any gate current flowing until the trigger voltage has reached a certain voltage in either direction , this makes the firing point of the TRIAC more even in both directions . DIACs and TRIACs As the AC supply voltage increases at the beginning of the cycle , C is charged . When the charging voltage reaches the breakover voltage of the diac , the diac breaks down and C discharges through the diac , producing a sudden pulse of current , which fires the triac into conduction . While conduction , the voltage across the resistor–capacitor combination is limited by the “ ON ” voltage of the triac . At the end of the half cycle the supply voltage falls to zero , reducing the current through the triac below its holding current , IH turning it “ OFF ” and the diac stops conduction . 14 When ON : Current passes through the peripheral driver , transistor and the diode bridge . A voltage develops across 0.1µF capacitor . The 2N4992 asymmetric trigger produces current enough to con- duct the TRIAC when the voltage at the capacitor reaches the trigger threshold . The TRIAC conducts and a current passes through its terminals ( almost a short circuit ) Because the TRIAC conducts in both directions , MT2 and MT1 resemble the normally-open contacts of EMR . 15 Non-Isolated Solid-State Relays 16 Non-Isolated Solid-State Relays Advantages of SSRs : No moving parts , no contact bounce , fast operation ( < 1µs ) , TTL level control and a logic gate input . It eliminates the transients that would be produced by an abrupt turnoff . Because once the SSR conducts , it remains ON until a zero crossing of the line voltage ( regardless of the control signal ) . Ideal for AC control applications Disadvantages of SSRs : High voltage transients can destroy TRIAC and this circuit is directly connected to AC source where these transients are initiated . No isolation between the control circuit ( peripheral driver ) and the 120-v source . If TRIAC fails , the peripheral driver could be destroyed and AC could pass to the digital control circuit . Isolated Solid-State Relays 17 18 Isolated Solid-State Relays An improved SSR that includes : A snubber circuit which consists of a resistor and a capacitor that are placed across the power switches to suppress voltage spikes and transients . It also damps the ringing caused by circuit inductance when the power switches . An optocoupler ( MOC3011 ) to isolate the control circuit from the controlled circuit . It consists of an Infrared-Emitting LED ( IRED ) and an SBS ( Silicon Bilateral Switch ) . The digital input is protected against excessive currents and voltages by D1 and Q1 . 19 Isolated Solid-State Relays Functionality : When both inputs of the peripheral driver are high , its output transistor turns on which allows a current to flow through IRED and the 47-Ω resistor . The light emitted by the IRED triggers the SBS into conduction . SBS triggers the TRIAC into conduction . The advantage of this design is the isolation between the load ( and the AC signal ) and the control circuit . SSR chips are available and selected devices can handle voltages as high as 280-v AC at 25A . Explain the operation of this SSR circuit . Calculate the range of values of RL which guarantees the functionality of this circuit . RL 20 EXAMPLE